var _NgtMaterialGeometryController_meshArgs;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
// GENERATED
import { Directive, Inject, InjectionToken, Input, NgModule, NgZone, } from '@angular/core';
import * as THREE from 'three';
import { NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER, NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER, NgtContentGeometryController, NgtContentGeometryControllerModule, } from './content-geometry.controller';
import { NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER, NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER, NgtContentMaterialController, NgtContentMaterialControllerModule, } from './content-material.controller';
import { Controller, createControllerProviderFactory } from './controller';
import { NGT_OBJECT_CONTROLLER_PROVIDER, NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, NgtObject3dControllerModule, } from './object-3d.controller';
import * as i0 from "@angular/core";
import * as i1 from "./object-3d.controller";
import * as i2 from "./content-material.controller";
import * as i3 from "./content-geometry.controller";
export const NGT_OBJECT_TYPE = new InjectionToken('Object3d Type', {
    providedIn: 'root',
    factory: () => THREE.Object3D,
});
export const NGT_OBJECT_POST_INIT = new InjectionToken('Object3d PostInit', {
    providedIn: 'root',
    factory: () => undefined,
});
export class NgtMaterialGeometryController extends Controller {
    constructor(ngZone, objectController, objectType, objectPostInit, contentMaterialController, contentGeometryController) {
        super(ngZone);
        this.objectController = objectController;
        this.objectType = objectType;
        this.objectPostInit = objectPostInit;
        _NgtMaterialGeometryController_meshArgs.set(this, []);
        objectController.initFn = () => {
            if (!contentGeometryController.geometry) {
                contentGeometryController.construct();
            }
            if (!contentMaterialController.material) {
                contentMaterialController.construct();
            }
            const object = new this.objectType(contentGeometryController.geometry || undefined, contentMaterialController.material || undefined, ...__classPrivateFieldGet(this, _NgtMaterialGeometryController_meshArgs, "f"));
            if (this.morphTargetDictionary && 'morphTargetDictionary' in object) {
                object.morphTargetDictionary =
                    this.morphTargetDictionary;
            }
            if (this.morphTargetInfluences && 'morphTargetInfluences' in object) {
                object.morphTargetInfluences =
                    this.morphTargetInfluences;
            }
            if (this.objectPostInit) {
                this.objectPostInit(object);
            }
            return object;
        };
        objectController.readyFn = () => {
            if (this.readyFn) {
                this.readyFn();
            }
        };
    }
    set meshArgs(v) {
        __classPrivateFieldSet(this, _NgtMaterialGeometryController_meshArgs, Array.isArray(v) ? v : [v], "f");
    }
    ngOnInit() {
        super.ngOnInit();
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    get controller() {
        return undefined;
    }
    get props() {
        return [];
    }
}
_NgtMaterialGeometryController_meshArgs = new WeakMap();
NgtMaterialGeometryController.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryController, deps: [{ token: i0.NgZone }, { token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: NGT_OBJECT_TYPE }, { token: NGT_OBJECT_POST_INIT }, { token: NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER }, { token: NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER }], target: i0.ɵɵFactoryTarget.Directive });
NgtMaterialGeometryController.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.1.1", type: NgtMaterialGeometryController, selector: "\n    ngt-mesh,\n    ngt-instanced-mesh,\n    ngt-skinned-mesh,\n    ngt-line,\n    ngt-line-loop,\n    ngt-line-segments,\n    ngt-points\n  ", inputs: { morphTargetInfluences: "morphTargetInfluences", morphTargetDictionary: "morphTargetDictionary" }, providers: [
        NGT_OBJECT_CONTROLLER_PROVIDER,
        NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER,
        NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER,
    ], exportAs: ["ngtMaterialGeometryController"], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryController, decorators: [{
            type: Directive,
            args: [{
                    selector: `
    ngt-mesh,
    ngt-instanced-mesh,
    ngt-skinned-mesh,
    ngt-line,
    ngt-line-loop,
    ngt-line-segments,
    ngt-points
  `,
                    exportAs: 'ngtMaterialGeometryController',
                    providers: [
                        NGT_OBJECT_CONTROLLER_PROVIDER,
                        NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER,
                        NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER,
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_TYPE]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_POST_INIT]
                }] }, { type: i2.NgtContentMaterialController, decorators: [{
                    type: Inject,
                    args: [NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER]
                }] }, { type: i3.NgtContentGeometryController, decorators: [{
                    type: Inject,
                    args: [NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER]
                }] }]; }, propDecorators: { morphTargetInfluences: [{
                type: Input
            }], morphTargetDictionary: [{
                type: Input
            }] } });
export class NgtMaterialGeometryControllerModule {
}
NgtMaterialGeometryControllerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryControllerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
NgtMaterialGeometryControllerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryControllerModule, declarations: [NgtMaterialGeometryController], exports: [NgtMaterialGeometryController, NgtObject3dControllerModule,
        NgtContentMaterialControllerModule,
        NgtContentGeometryControllerModule] });
NgtMaterialGeometryControllerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryControllerModule, imports: [NgtObject3dControllerModule,
        NgtContentMaterialControllerModule,
        NgtContentGeometryControllerModule] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtMaterialGeometryControllerModule, decorators: [{
            type: NgModule,
            args: [{
                    declarations: [NgtMaterialGeometryController],
                    exports: [
                        NgtMaterialGeometryController,
                        NgtObject3dControllerModule,
                        NgtContentMaterialControllerModule,
                        NgtContentGeometryControllerModule,
                    ],
                }]
        }] });
export const [NGT_MATERIAL_GEOMETRY_WATCHED_CONTROLLER, NGT_MATERIAL_GEOMETRY_CONTROLLER_PROVIDER,] = createControllerProviderFactory({
    watchedControllerTokenName: 'Watched MaterialGeometryController',
    controller: NgtMaterialGeometryController,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0ZXJpYWwtZ2VvbWV0cnkuY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9jb250cm9sbGVycy9tYXRlcmlhbC1nZW9tZXRyeS5jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsWUFBWTtBQUNaLE9BQU8sRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLGNBQWMsRUFDZCxLQUFLLEVBQ0wsUUFBUSxFQUNSLE1BQU0sR0FFUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUUvQixPQUFPLEVBQ0wsd0NBQXdDLEVBQ3hDLHVDQUF1QyxFQUN2Qyw0QkFBNEIsRUFDNUIsa0NBQWtDLEdBQ25DLE1BQU0sK0JBQStCLENBQUM7QUFDdkMsT0FBTyxFQUNMLHdDQUF3QyxFQUN4Qyx1Q0FBdUMsRUFDdkMsNEJBQTRCLEVBQzVCLGtDQUFrQyxHQUNuQyxNQUFNLCtCQUErQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxVQUFVLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDM0UsT0FBTyxFQUNMLDhCQUE4QixFQUM5Qiw2QkFBNkIsRUFDN0IscUJBQXFCLEVBQ3JCLDJCQUEyQixHQUM1QixNQUFNLHdCQUF3QixDQUFDOzs7OztBQUVoQyxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsSUFBSSxjQUFjLENBQUMsZUFBZSxFQUFFO0lBQ2pFLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUTtDQUM5QixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLGNBQWMsQ0FBQyxtQkFBbUIsRUFBRTtJQUMxRSxVQUFVLEVBQUUsTUFBTTtJQUNsQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUztDQUN6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NkI7OzBCQUVwQyxNQUFNOzJCQUFDLGVBQWU7OzBCQUV0QixNQUFNOzJCQUFDLG9CQUFvQjs7MEJBRTNCLE1BQU07MkJBQUMsdUNBQXVDOzswQkFFOUMsTUFBTTsyQkFBQyx1Q0FBdUM7NENBYnhDLHFCQUFxQjtzQkFBN0IsS0FBSztnQkFDRyxxQkFBcUI7c0JBQTdCLEtBQUs7O0FBaUZSLE1BQU0sT0FBTyxtQ0FBbUM7O2dJQUFuQyxtQ0FBbUM7aUlBQW5DLG1DQUFtQyxpQkEzRm5DLDZCQUE2QixhQUE3Qiw2QkFBNkIsRUFzRnRDLDJCQUEyQjtRQUMzQixrQ0FBa0M7UUFDbEMsa0NBQWtDO2lJQUd6QixtQ0FBbUMsWUFMNUMsMkJBQTJCO1FBQzNCLGtDQUFrQztRQUNsQyxrQ0FBa0M7MkZBR3pCLG1DQUFtQztrQkFUL0MsUUFBUTttQkFBQztvQkFDUixZQUFZLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQztvQkFDN0MsT0FBTyxFQUFFO3dCQUNQLDZCQUE2Qjt3QkFDN0IsMkJBQTJCO3dCQUMzQixrQ0FBa0M7d0JBQ2xDLGtDQUFrQztxQkFDbkM7aUJBQ0Y7O0FBR0QsTUFBTSxDQUFDLE1BQU0sQ0FDWCx3Q0FBd0MsRUFDeEMseUNBQXlDLEVBQzFDLEdBQUcsK0JBQStCLENBQUM7SUFDbEMsMEJBQTBCLEVBQUUsb0NBQW9DO0lBQ2hFLFVBQVUsRUFBRSw2QkFBNkI7Q0FDMUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR0VORVJBVEVEXG5pbXBvcnQge1xuICBEaXJlY3RpdmUsXG4gIEluamVjdCxcbiAgSW5qZWN0aW9uVG9rZW4sXG4gIElucHV0LFxuICBOZ01vZHVsZSxcbiAgTmdab25lLFxuICBPbkluaXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgQW55Q29uc3RydWN0b3IsIEFueUV4dGVuZGVyRnVuY3Rpb24sIFVua25vd25SZWNvcmQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge1xuICBOR1RfQ09OVEVOVF9HRU9NRVRSWV9DT05UUk9MTEVSX1BST1ZJREVSLFxuICBOR1RfQ09OVEVOVF9HRU9NRVRSWV9XQVRDSEVEX0NPTlRST0xMRVIsXG4gIE5ndENvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXIsXG4gIE5ndENvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXJNb2R1bGUsXG59IGZyb20gJy4vY29udGVudC1nZW9tZXRyeS5jb250cm9sbGVyJztcbmltcG9ydCB7XG4gIE5HVF9DT05URU5UX01BVEVSSUFMX0NPTlRST0xMRVJfUFJPVklERVIsXG4gIE5HVF9DT05URU5UX01BVEVSSUFMX1dBVENIRURfQ09OVFJPTExFUixcbiAgTmd0Q29udGVudE1hdGVyaWFsQ29udHJvbGxlcixcbiAgTmd0Q29udGVudE1hdGVyaWFsQ29udHJvbGxlck1vZHVsZSxcbn0gZnJvbSAnLi9jb250ZW50LW1hdGVyaWFsLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQ29udHJvbGxlciwgY3JlYXRlQ29udHJvbGxlclByb3ZpZGVyRmFjdG9yeSB9IGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQge1xuICBOR1RfT0JKRUNUX0NPTlRST0xMRVJfUFJPVklERVIsXG4gIE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSLFxuICBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gIE5ndE9iamVjdDNkQ29udHJvbGxlck1vZHVsZSxcbn0gZnJvbSAnLi9vYmplY3QtM2QuY29udHJvbGxlcic7XG5cbmV4cG9ydCBjb25zdCBOR1RfT0JKRUNUX1RZUEUgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ09iamVjdDNkIFR5cGUnLCB7XG4gIHByb3ZpZGVkSW46ICdyb290JyxcbiAgZmFjdG9yeTogKCkgPT4gVEhSRUUuT2JqZWN0M0QsXG59KTtcblxuZXhwb3J0IGNvbnN0IE5HVF9PQkpFQ1RfUE9TVF9JTklUID0gbmV3IEluamVjdGlvblRva2VuKCdPYmplY3QzZCBQb3N0SW5pdCcsIHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxuICBmYWN0b3J5OiAoKSA9PiB1bmRlZmluZWQsXG59KTtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiBgXG4gICAgbmd0LW1lc2gsXG4gICAgbmd0LWluc3RhbmNlZC1tZXNoLFxuICAgIG5ndC1za2lubmVkLW1lc2gsXG4gICAgbmd0LWxpbmUsXG4gICAgbmd0LWxpbmUtbG9vcCxcbiAgICBuZ3QtbGluZS1zZWdtZW50cyxcbiAgICBuZ3QtcG9pbnRzXG4gIGAsXG4gIGV4cG9ydEFzOiAnbmd0TWF0ZXJpYWxHZW9tZXRyeUNvbnRyb2xsZXInLFxuICBwcm92aWRlcnM6IFtcbiAgICBOR1RfT0JKRUNUX0NPTlRST0xMRVJfUFJPVklERVIsXG4gICAgTkdUX0NPTlRFTlRfTUFURVJJQUxfQ09OVFJPTExFUl9QUk9WSURFUixcbiAgICBOR1RfQ09OVEVOVF9HRU9NRVRSWV9DT05UUk9MTEVSX1BST1ZJREVSLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RNYXRlcmlhbEdlb21ldHJ5Q29udHJvbGxlclxuICBleHRlbmRzIENvbnRyb2xsZXJcbiAgaW1wbGVtZW50cyBPbkluaXRcbntcbiAgI21lc2hBcmdzOiB1bmtub3duW10gPSBbXTtcbiAgc2V0IG1lc2hBcmdzKHY6IHVua25vd24gfCB1bmtub3duW10pIHtcbiAgICB0aGlzLiNtZXNoQXJncyA9IEFycmF5LmlzQXJyYXkodikgPyB2IDogW3ZdO1xuICB9XG5cbiAgQElucHV0KCkgbW9ycGhUYXJnZXRJbmZsdWVuY2VzPzogbnVtYmVyW107XG4gIEBJbnB1dCgpIG1vcnBoVGFyZ2V0RGljdGlvbmFyeT86IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmdab25lOiBOZ1pvbmUsXG4gICAgQEluamVjdChOR1RfT0JKRUNUX1dBVENIRURfQ09OVFJPTExFUilcbiAgICBwdWJsaWMgb2JqZWN0Q29udHJvbGxlcjogTmd0T2JqZWN0M2RDb250cm9sbGVyLFxuICAgIEBJbmplY3QoTkdUX09CSkVDVF9UWVBFKVxuICAgIHB1YmxpYyBvYmplY3RUeXBlOiBBbnlDb25zdHJ1Y3RvcjxUSFJFRS5PYmplY3QzRD4sXG4gICAgQEluamVjdChOR1RfT0JKRUNUX1BPU1RfSU5JVClcbiAgICBwdWJsaWMgb2JqZWN0UG9zdEluaXQ6IEFueUV4dGVuZGVyRnVuY3Rpb248VEhSRUUuT2JqZWN0M0Q+IHwgdW5kZWZpbmVkLFxuICAgIEBJbmplY3QoTkdUX0NPTlRFTlRfTUFURVJJQUxfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIGNvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXI6IE5ndENvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIsXG4gICAgQEluamVjdChOR1RfQ09OVEVOVF9HRU9NRVRSWV9XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgY29udGVudEdlb21ldHJ5Q29udHJvbGxlcjogTmd0Q29udGVudEdlb21ldHJ5Q29udHJvbGxlclxuICApIHtcbiAgICBzdXBlcihuZ1pvbmUpO1xuXG4gICAgb2JqZWN0Q29udHJvbGxlci5pbml0Rm4gPSAoKSA9PiB7XG4gICAgICBpZiAoIWNvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXIuZ2VvbWV0cnkpIHtcbiAgICAgICAgY29udGVudEdlb21ldHJ5Q29udHJvbGxlci5jb25zdHJ1Y3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjb250ZW50TWF0ZXJpYWxDb250cm9sbGVyLm1hdGVyaWFsKSB7XG4gICAgICAgIGNvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIuY29uc3RydWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9iamVjdCA9IG5ldyB0aGlzLm9iamVjdFR5cGUoXG4gICAgICAgIGNvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXIuZ2VvbWV0cnkgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50TWF0ZXJpYWxDb250cm9sbGVyLm1hdGVyaWFsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgLi4udGhpcy4jbWVzaEFyZ3NcbiAgICAgICk7XG5cbiAgICAgIGlmICh0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSAmJiAnbW9ycGhUYXJnZXREaWN0aW9uYXJ5JyBpbiBvYmplY3QpIHtcbiAgICAgICAgKG9iamVjdCBhcyB1bmtub3duIGFzIFVua25vd25SZWNvcmQpLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSA9XG4gICAgICAgICAgdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyAmJiAnbW9ycGhUYXJnZXRJbmZsdWVuY2VzJyBpbiBvYmplY3QpIHtcbiAgICAgICAgKG9iamVjdCBhcyB1bmtub3duIGFzIFVua25vd25SZWNvcmQpLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyA9XG4gICAgICAgICAgdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9iamVjdFBvc3RJbml0KSB7XG4gICAgICAgIHRoaXMub2JqZWN0UG9zdEluaXQob2JqZWN0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuXG4gICAgb2JqZWN0Q29udHJvbGxlci5yZWFkeUZuID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMucmVhZHlGbikge1xuICAgICAgICB0aGlzLnJlYWR5Rm4oKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdENvbnRyb2xsZXIuaW5pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IGNvbnRyb2xsZXIoKTogQ29udHJvbGxlciB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldCBwcm9wcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW05ndE1hdGVyaWFsR2VvbWV0cnlDb250cm9sbGVyXSxcbiAgZXhwb3J0czogW1xuICAgIE5ndE1hdGVyaWFsR2VvbWV0cnlDb250cm9sbGVyLFxuICAgIE5ndE9iamVjdDNkQ29udHJvbGxlck1vZHVsZSxcbiAgICBOZ3RDb250ZW50TWF0ZXJpYWxDb250cm9sbGVyTW9kdWxlLFxuICAgIE5ndENvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXJNb2R1bGUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE5ndE1hdGVyaWFsR2VvbWV0cnlDb250cm9sbGVyTW9kdWxlIHt9XG5cbmV4cG9ydCBjb25zdCBbXG4gIE5HVF9NQVRFUklBTF9HRU9NRVRSWV9XQVRDSEVEX0NPTlRST0xMRVIsXG4gIE5HVF9NQVRFUklBTF9HRU9NRVRSWV9DT05UUk9MTEVSX1BST1ZJREVSLFxuXSA9IGNyZWF0ZUNvbnRyb2xsZXJQcm92aWRlckZhY3Rvcnkoe1xuICB3YXRjaGVkQ29udHJvbGxlclRva2VuTmFtZTogJ1dhdGNoZWQgTWF0ZXJpYWxHZW9tZXRyeUNvbnRyb2xsZXInLFxuICBjb250cm9sbGVyOiBOZ3RNYXRlcmlhbEdlb21ldHJ5Q29udHJvbGxlcixcbn0pO1xuIl19