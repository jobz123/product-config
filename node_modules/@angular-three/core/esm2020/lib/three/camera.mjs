var _NgtCommonCamera_cameraArgs, _NgtCommonCamera_camera;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { Directive, EventEmitter, Inject, NgZone, Output, } from '@angular/core';
import { NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, } from '../controllers/object-3d.controller';
import * as i0 from "@angular/core";
import * as i1 from "../controllers/object-3d.controller";
export class NgtCommonCamera {
    constructor(objectController, ngZone) {
        this.objectController = objectController;
        this.ngZone = ngZone;
        this.ready = new EventEmitter();
        _NgtCommonCamera_cameraArgs.set(this, []);
        _NgtCommonCamera_camera.set(this, void 0);
        objectController.initFn = () => {
            __classPrivateFieldSet(this, _NgtCommonCamera_camera, new this.cameraType(...__classPrivateFieldGet(this, _NgtCommonCamera_cameraArgs, "f")), "f");
            return __classPrivateFieldGet(this, _NgtCommonCamera_camera, "f");
        };
        objectController.readyFn = () => {
            this.ready.emit(this.camera);
        };
    }
    set cameraArgs(v) {
        __classPrivateFieldSet(this, _NgtCommonCamera_cameraArgs, Array.isArray(v) ? v : [v], "f");
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            if (!__classPrivateFieldGet(this, _NgtCommonCamera_camera, "f")) {
                this.objectController.init();
            }
        });
    }
    get camera() {
        return __classPrivateFieldGet(this, _NgtCommonCamera_camera, "f");
    }
}
_NgtCommonCamera_cameraArgs = new WeakMap(), _NgtCommonCamera_camera = new WeakMap();
NgtCommonCamera.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtCommonCamera, deps: [{ token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });
NgtCommonCamera.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.1.1", type: NgtCommonCamera, outputs: { ready: "ready" }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtCommonCamera, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: i0.NgZone }]; }, propDecorators: { ready: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FtZXJhLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3RocmVlL2NhbWVyYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixNQUFNLEVBRU4sTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFDTCw2QkFBNkIsRUFDN0IscUJBQXFCLEdBQ3RCLE1BQU0scUNBQXFDLENBQUM7OztBQUk3QyxNQUFNLE9BQWdCLGVBQWU7SUFRbkMsWUFFWSxnQkFBdUMsRUFDdkMsTUFBYztRQURkLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBdUI7UUFDdkMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQVBoQixVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQW1COUMsc0NBQXlCLEVBQUUsRUFBQztRQWdCNUIsMENBQWtCO1FBMUJoQixnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQzdCLHVCQUFBLElBQUksMkJBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsdUJBQUEsSUFBSSxtQ0FBWSxDQUFDLE1BQUEsQ0FBQztZQUN4RCxPQUFPLHVCQUFBLElBQUksK0JBQVEsQ0FBQztRQUN0QixDQUFDLENBQUM7UUFFRixnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMvQixDQUFDLENBQUM7SUFDSixDQUFDO0lBR0QsSUFBYyxVQUFVLENBQUMsQ0FBc0I7UUFDN0MsdUJBQUEsSUFBSSwrQkFBZSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQUEsQ0FBQztRQUM5QyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtZQUNqQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyx1QkFBQSxJQUFJLCtCQUFRLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUdELElBQUksTUFBTTtRQUNSLE9BQU8sdUJBQUEsSUFBSSwrQkFBUSxDQUFDO0lBQ3RCLENBQUM7Ozs0R0ExQ21CLGVBQWUsa0JBU3pCLDZCQUE2QjtnR0FUbkIsZUFBZTsyRkFBZixlQUFlO2tCQURwQyxTQUFTOzswQkFVTCxNQUFNOzJCQUFDLDZCQUE2QjtpRUFMN0IsS0FBSztzQkFBZCxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBFdmVudEVtaXR0ZXIsXG4gIEluamVjdCxcbiAgTmdab25lLFxuICBPbkluaXQsXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5pbXBvcnQge1xuICBOR1RfT0JKRUNUX1dBVENIRURfQ09OVFJPTExFUixcbiAgTmd0T2JqZWN0M2RDb250cm9sbGVyLFxufSBmcm9tICcuLi9jb250cm9sbGVycy9vYmplY3QtM2QuY29udHJvbGxlcic7XG5pbXBvcnQgeyBBbnlDb25zdHJ1Y3RvciB9IGZyb20gJy4uL3R5cGVzJztcblxuQERpcmVjdGl2ZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTmd0Q29tbW9uQ2FtZXJhPFxuICBUQ2FtZXJhIGV4dGVuZHMgVEhSRUUuQ2FtZXJhID0gVEhSRUUuQ2FtZXJhXG4+IGltcGxlbWVudHMgT25Jbml0XG57XG4gIEBPdXRwdXQoKSByZWFkeSA9IG5ldyBFdmVudEVtaXR0ZXI8VENhbWVyYT4oKTtcblxuICBhYnN0cmFjdCBjYW1lcmFUeXBlOiBBbnlDb25zdHJ1Y3RvcjxUQ2FtZXJhPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIHByb3RlY3RlZCBvYmplY3RDb250cm9sbGVyOiBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lXG4gICkge1xuICAgIG9iamVjdENvbnRyb2xsZXIuaW5pdEZuID0gKCkgPT4ge1xuICAgICAgdGhpcy4jY2FtZXJhID0gbmV3IHRoaXMuY2FtZXJhVHlwZSguLi50aGlzLiNjYW1lcmFBcmdzKTtcbiAgICAgIHJldHVybiB0aGlzLiNjYW1lcmE7XG4gICAgfTtcblxuICAgIG9iamVjdENvbnRyb2xsZXIucmVhZHlGbiA9ICgpID0+IHtcbiAgICAgIHRoaXMucmVhZHkuZW1pdCh0aGlzLmNhbWVyYSk7XG4gICAgfTtcbiAgfVxuXG4gICNjYW1lcmFBcmdzOiB1bmtub3duW10gPSBbXTtcbiAgcHJvdGVjdGVkIHNldCBjYW1lcmFBcmdzKHY6IHVua25vd24gfCB1bmtub3duW10pIHtcbiAgICB0aGlzLiNjYW1lcmFBcmdzID0gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbdl07XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3RDb250cm9sbGVyLmluaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Q29udHJvbGxlci5pbml0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAjY2FtZXJhITogVENhbWVyYTtcbiAgZ2V0IGNhbWVyYSgpOiBUQ2FtZXJhIHtcbiAgICByZXR1cm4gdGhpcy4jY2FtZXJhO1xuICB9XG59XG4iXX0=