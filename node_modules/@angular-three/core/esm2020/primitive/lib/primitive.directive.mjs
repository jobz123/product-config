var _NgtPrimitive_object;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { NGT_OBJECT_CONTROLLER_PROVIDER, NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, NgtObject3dControllerModule, } from '@angular-three/core';
import { Directive, EventEmitter, Inject, Input, NgModule, NgZone, Output, } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular-three/core";
export class NgtPrimitive {
    constructor(objectController, ngZone) {
        this.objectController = objectController;
        this.ngZone = ngZone;
        this.ready = new EventEmitter();
        _NgtPrimitive_object.set(this, void 0);
    }
    set object(value) {
        __classPrivateFieldSet(this, _NgtPrimitive_object, value, "f");
        this.objectController.initFn = () => value;
        this.objectController.readyFn = () => {
            this.ready.emit(this.object);
        };
    }
    get object() {
        return __classPrivateFieldGet(this, _NgtPrimitive_object, "f");
    }
    ngOnChanges() {
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
}
_NgtPrimitive_object = new WeakMap();
NgtPrimitive.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitive, deps: [{ token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });
NgtPrimitive.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.1.1", type: NgtPrimitive, selector: "ngt-primitive[object]", inputs: { object: "object" }, outputs: { ready: "ready" }, providers: [NGT_OBJECT_CONTROLLER_PROVIDER], exportAs: ["ngtPrimitive"], usesOnChanges: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitive, decorators: [{
            type: Directive,
            args: [{
                    selector: 'ngt-primitive[object]',
                    exportAs: 'ngtPrimitive',
                    providers: [NGT_OBJECT_CONTROLLER_PROVIDER],
                }]
        }], ctorParameters: function () { return [{ type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: i0.NgZone }]; }, propDecorators: { ready: [{
                type: Output
            }], object: [{
                type: Input
            }] } });
export class NgtPrimitiveModule {
}
NgtPrimitiveModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitiveModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
NgtPrimitiveModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitiveModule, declarations: [NgtPrimitive], exports: [NgtPrimitive, NgtObject3dControllerModule] });
NgtPrimitiveModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitiveModule, imports: [NgtObject3dControllerModule] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtPrimitiveModule, decorators: [{
            type: NgModule,
            args: [{
                    declarations: [NgtPrimitive],
                    exports: [NgtPrimitive, NgtObject3dControllerModule],
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbWl0aXZlLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvcmUvcHJpbWl0aXZlL3NyYy9saWIvcHJpbWl0aXZlLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFDTCw4QkFBOEIsRUFDOUIsNkJBQTZCLEVBQzdCLHFCQUFxQixFQUNyQiwyQkFBMkIsR0FDNUIsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQ0wsU0FBUyxFQUNULFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUNMLFFBQVEsRUFDUixNQUFNLEVBQ04sTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDOzs7QUFRdkIsTUFBTSxPQUFPLFlBQVk7SUFpQnZCLFlBRVUsZ0JBQXVDLEVBQ3ZDLE1BQWM7UUFEZCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXVCO1FBQ3ZDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFuQmQsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFFOUMsdUNBQWtCO0lBa0JmLENBQUM7SUFoQkosSUFBYSxNQUFNLENBQUMsS0FBYztRQUNoQyx1QkFBQSxJQUFJLHdCQUFXLEtBQUssTUFBQSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQzNDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMvQixDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ1IsT0FBTyx1QkFBQSxJQUFJLDRCQUFRLENBQUM7SUFDdEIsQ0FBQztJQVFELFdBQVc7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtZQUNqQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOzs7eUdBM0JVLFlBQVksa0JBa0JiLDZCQUE2Qjs2RkFsQjVCLFlBQVksMkdBRlosQ0FBQyw4QkFBOEIsQ0FBQzsyRkFFaEMsWUFBWTtrQkFMeEIsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsdUJBQXVCO29CQUNqQyxRQUFRLEVBQUUsY0FBYztvQkFDeEIsU0FBUyxFQUFFLENBQUMsOEJBQThCLENBQUM7aUJBQzVDOzswQkFtQkksTUFBTTsyQkFBQyw2QkFBNkI7aUVBakI3QixLQUFLO3NCQUFkLE1BQU07Z0JBSU0sTUFBTTtzQkFBbEIsS0FBSzs7QUE2QlIsTUFBTSxPQUFPLGtCQUFrQjs7K0dBQWxCLGtCQUFrQjtnSEFBbEIsa0JBQWtCLGlCQWxDbEIsWUFBWSxhQUFaLFlBQVksRUFnQ0MsMkJBQTJCO2dIQUV4QyxrQkFBa0IsWUFGTCwyQkFBMkI7MkZBRXhDLGtCQUFrQjtrQkFKOUIsUUFBUTttQkFBQztvQkFDUixZQUFZLEVBQUUsQ0FBQyxZQUFZLENBQUM7b0JBQzVCLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSwyQkFBMkIsQ0FBQztpQkFDckQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBOR1RfT0JKRUNUX0NPTlRST0xMRVJfUFJPVklERVIsXG4gIE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSLFxuICBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gIE5ndE9iamVjdDNkQ29udHJvbGxlck1vZHVsZSxcbn0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvY29yZSc7XG5pbXBvcnQge1xuICBEaXJlY3RpdmUsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgTmdNb2R1bGUsXG4gIE5nWm9uZSxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnbmd0LXByaW1pdGl2ZVtvYmplY3RdJyxcbiAgZXhwb3J0QXM6ICduZ3RQcmltaXRpdmUnLFxuICBwcm92aWRlcnM6IFtOR1RfT0JKRUNUX0NPTlRST0xMRVJfUFJPVklERVJdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RQcmltaXRpdmU8VE9iamVjdCBleHRlbmRzIFRIUkVFLk9iamVjdDNEID0gVEhSRUUuT2JqZWN0M0Q+IHtcbiAgQE91dHB1dCgpIHJlYWR5ID0gbmV3IEV2ZW50RW1pdHRlcjxUT2JqZWN0PigpO1xuXG4gICNvYmplY3QhOiBUT2JqZWN0O1xuXG4gIEBJbnB1dCgpIHNldCBvYmplY3QodmFsdWU6IFRPYmplY3QpIHtcbiAgICB0aGlzLiNvYmplY3QgPSB2YWx1ZTtcbiAgICB0aGlzLm9iamVjdENvbnRyb2xsZXIuaW5pdEZuID0gKCkgPT4gdmFsdWU7XG4gICAgdGhpcy5vYmplY3RDb250cm9sbGVyLnJlYWR5Rm4gPSAoKSA9PiB7XG4gICAgICB0aGlzLnJlYWR5LmVtaXQodGhpcy5vYmplY3QpO1xuICAgIH07XG4gIH1cblxuICBnZXQgb2JqZWN0KCkge1xuICAgIHJldHVybiB0aGlzLiNvYmplY3Q7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIHByaXZhdGUgb2JqZWN0Q29udHJvbGxlcjogTmd0T2JqZWN0M2RDb250cm9sbGVyLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcbiAgKSB7fVxuXG4gIG5nT25DaGFuZ2VzKCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMub2JqZWN0Q29udHJvbGxlci5pbml0KCk7XG4gICAgfSk7XG4gIH1cbn1cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbTmd0UHJpbWl0aXZlXSxcbiAgZXhwb3J0czogW05ndFByaW1pdGl2ZSwgTmd0T2JqZWN0M2RDb250cm9sbGVyTW9kdWxlXSxcbn0pXG5leHBvcnQgY2xhc3MgTmd0UHJpbWl0aXZlTW9kdWxlIHt9XG4iXX0=