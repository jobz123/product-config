{"version":3,"file":"angular-three-core-primitive.mjs","sources":["../../../../packages/core/primitive/src/lib/primitive.directive.ts","../../../../packages/core/primitive/src/angular-three-core-primitive.ts"],"sourcesContent":["import {\n  NGT_OBJECT_CONTROLLER_PROVIDER,\n  NGT_OBJECT_WATCHED_CONTROLLER,\n  NgtObject3dController,\n  NgtObject3dControllerModule,\n} from '@angular-three/core';\nimport {\n  Directive,\n  EventEmitter,\n  Inject,\n  Input,\n  NgModule,\n  NgZone,\n  Output,\n} from '@angular/core';\nimport * as THREE from 'three';\n\n@Directive({\n  selector: 'ngt-primitive[object]',\n  exportAs: 'ngtPrimitive',\n  providers: [NGT_OBJECT_CONTROLLER_PROVIDER],\n})\nexport class NgtPrimitive<TObject extends THREE.Object3D = THREE.Object3D> {\n  @Output() ready = new EventEmitter<TObject>();\n\n  #object!: TObject;\n\n  @Input() set object(value: TObject) {\n    this.#object = value;\n    this.objectController.initFn = () => value;\n    this.objectController.readyFn = () => {\n      this.ready.emit(this.object);\n    };\n  }\n\n  get object() {\n    return this.#object;\n  }\n\n  constructor(\n    @Inject(NGT_OBJECT_WATCHED_CONTROLLER)\n    private objectController: NgtObject3dController,\n    private ngZone: NgZone\n  ) {}\n\n  ngOnChanges() {\n    this.ngZone.runOutsideAngular(() => {\n      this.objectController.init();\n    });\n  }\n}\n\n@NgModule({\n  declarations: [NgtPrimitive],\n  exports: [NgtPrimitive, NgtObject3dControllerModule],\n})\nexport class NgtPrimitiveModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;MAsBa,YAAY;IAiBvB,YAEU,gBAAuC,EACvC,MAAc;QADd,qBAAgB,GAAhB,gBAAgB,CAAuB;QACvC,WAAM,GAAN,MAAM,CAAQ;QAnBd,UAAK,GAAG,IAAI,YAAY,EAAW,CAAC;QAE9C,uCAAkB;KAkBd;IAhBJ,IAAa,MAAM,CAAC,KAAc;QAChC,uBAAA,IAAI,wBAAW,KAAK,MAAA,CAAC;QACrB,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,MAAM,KAAK,CAAC;QAC3C,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG;YAC9B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC9B,CAAC;KACH;IAED,IAAI,MAAM;QACR,OAAO,uBAAA,IAAI,4BAAQ,CAAC;KACrB;IAQD,WAAW;QACT,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC5B,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;SAC9B,CAAC,CAAC;KACJ;;;yGA3BU,YAAY,kBAkBb,6BAA6B;6FAlB5B,YAAY,2GAFZ,CAAC,8BAA8B,CAAC;2FAEhC,YAAY;kBALxB,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,QAAQ,EAAE,cAAc;oBACxB,SAAS,EAAE,CAAC,8BAA8B,CAAC;iBAC5C;;0BAmBI,MAAM;2BAAC,6BAA6B;iEAjB7B,KAAK;sBAAd,MAAM;gBAIM,MAAM;sBAAlB,KAAK;;MA6BK,kBAAkB;;+GAAlB,kBAAkB;gHAAlB,kBAAkB,iBAlClB,YAAY,aAAZ,YAAY,EAgCC,2BAA2B;gHAExC,kBAAkB,YAFL,2BAA2B;2FAExC,kBAAkB;kBAJ9B,QAAQ;mBAAC;oBACR,YAAY,EAAE,CAAC,YAAY,CAAC;oBAC5B,OAAO,EAAE,CAAC,YAAY,EAAE,2BAA2B,CAAC;iBACrD;;;ACvDD;;;;;;"}