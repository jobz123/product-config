{"version":3,"file":"angular-three-core-stats.mjs","sources":["../../../../packages/core/stats/src/lib/stats.directive.ts","../../../../packages/core/stats/src/angular-three-core-stats.ts"],"sourcesContent":["import { NgtAnimationFrameStore } from '@angular-three/core';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  Directive,\n  Inject,\n  Input,\n  NgModule,\n  NgZone,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\n// import Stats from minified bundle for minimizing bundle size\n// @ts-ignore\nimport Stats from 'three/examples/js/libs/stats.min';\n\n@Directive({\n  selector: 'ngt-stats',\n  exportAs: 'ngtStats',\n})\nexport class NgtStats implements OnInit, OnDestroy {\n  @Input() parent?: HTMLElement;\n\n  #node: HTMLElement;\n  #stats?: Stats;\n  #animationUuid = '';\n\n  constructor(\n    private animationFrameStore: NgtAnimationFrameStore,\n    private ngZone: NgZone,\n    @Inject(DOCUMENT) document: Document\n  ) {\n    this.#node = document.body;\n  }\n\n  ngOnInit() {\n    this.ngZone.runOutsideAngular(() => {\n      if (this.parent) {\n        this.#node = this.parent;\n      }\n\n      this.#stats = new Stats();\n      this.#node.appendChild(this.#stats.dom);\n      this.#animationUuid = this.animationFrameStore.register({\n        callback: () => {\n          this.#stats.update();\n        },\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.ngZone.runOutsideAngular(() => {\n      if (this.#stats) {\n        this.animationFrameStore.actions.unsubscriberUuid(this.#animationUuid);\n        this.#stats.end();\n        this.#node.removeChild(this.#stats.dom);\n      }\n    });\n  }\n}\n\n@NgModule({\n  declarations: [NgtStats],\n  exports: [NgtStats],\n})\nexport class NgtStatsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;MAmBa,QAAQ;IAOnB,YACU,mBAA2C,EAC3C,MAAc,EACJ,QAAkB;QAF5B,wBAAmB,GAAnB,mBAAmB,CAAwB;QAC3C,WAAM,GAAN,MAAM,CAAQ;QANxB,iCAAmB;QACnB,kCAAe;QACf,kCAAiB,EAAE,EAAC;QAOlB,uBAAA,IAAI,kBAAS,QAAQ,CAAC,IAAI,MAAA,CAAC;KAC5B;IAED,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC5B,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,uBAAA,IAAI,kBAAS,IAAI,CAAC,MAAM,MAAA,CAAC;aAC1B;YAED,uBAAA,IAAI,mBAAU,IAAI,KAAK,EAAE,MAAA,CAAC;YAC1B,uBAAA,IAAI,sBAAM,CAAC,WAAW,CAAC,uBAAA,IAAI,uBAAO,CAAC,GAAG,CAAC,CAAC;YACxC,uBAAA,IAAI,2BAAkB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC;gBACtD,QAAQ,EAAE;oBACR,uBAAA,IAAI,uBAAO,CAAC,MAAM,EAAE,CAAC;iBACtB;aACF,CAAC,MAAA,CAAC;SACJ,CAAC,CAAC;KACJ;IAED,WAAW;QACT,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC5B,IAAI,uBAAA,IAAI,uBAAO,EAAE;gBACf,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,gBAAgB,CAAC,uBAAA,IAAI,+BAAe,CAAC,CAAC;gBACvE,uBAAA,IAAI,uBAAO,CAAC,GAAG,EAAE,CAAC;gBAClB,uBAAA,IAAI,sBAAM,CAAC,WAAW,CAAC,uBAAA,IAAI,uBAAO,CAAC,GAAG,CAAC,CAAC;aACzC;SACF,CAAC,CAAC;KACJ;;;qGAvCU,QAAQ,8EAUT,QAAQ;yFAVP,QAAQ;2FAAR,QAAQ;kBAJpB,SAAS;mBAAC;oBACT,QAAQ,EAAE,WAAW;oBACrB,QAAQ,EAAE,UAAU;iBACrB;oHAW+B,QAAQ;0BAAnC,MAAM;2BAAC,QAAQ;4CATT,MAAM;sBAAd,KAAK;;MA6CK,cAAc;;2GAAd,cAAc;4GAAd,cAAc,iBA9Cd,QAAQ,aAAR,QAAQ;4GA8CR,cAAc;2FAAd,cAAc;kBAJ1B,QAAQ;mBAAC;oBACR,YAAY,EAAE,CAAC,QAAQ,CAAC;oBACxB,OAAO,EAAE,CAAC,QAAQ,CAAC;iBACpB;;;AChED;;;;;;"}