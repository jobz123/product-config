var _NgtSobaGizmoFaceMaterial_change$;
import { __classPrivateFieldGet } from "tslib";
import { Controller, createControllerProviderFactory, EnhancedRxState, NgtRepeatModule, NgtSobaExtender, NgtStore, } from '@angular-three/core';
import { NgtGroupModule } from '@angular-three/core/group';
import { NgtAmbientLightModule, NgtPointLightModule, } from '@angular-three/core/lights';
import { NgtMeshBasicMaterialModule, NgtMeshLambertMaterialModule, } from '@angular-three/core/materials';
import { NgtSobaBoxModule } from '@angular-three/soba/shapes';
import { CommonModule, DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, Component, Directive, EventEmitter, Inject, Input, NgModule, NgZone, Output, } from '@angular/core';
import { selectSlice } from '@rx-angular/state';
import { combineLatest, map, startWith } from 'rxjs';
import * as THREE from 'three';
import { NgtSobaGizmoHelperStore } from './gizmo-helper.store';
import * as i0 from "@angular/core";
import * as i1 from "@angular-three/core";
import * as i2 from "./gizmo-helper.store";
import * as i3 from "@angular/common";
import * as i4 from "@angular-three/core/group";
import * as i5 from "@angular-three/core/lights";
import * as i6 from "@angular-three/soba/shapes";
import * as i7 from "@angular-three/core/materials";
const colors = { bg: '#f0f0f0', hover: '#999', text: 'black', stroke: 'black' };
const defaultFaces = ['Right', 'Left', 'Top', 'Bottom', 'Front', 'Back'];
const makePositionVector = (xyz) => new THREE.Vector3(...xyz).multiplyScalar(0.38);
const corners = [
    [1, 1, 1],
    [1, 1, -1],
    [1, -1, 1],
    [1, -1, -1],
    [-1, 1, 1],
    [-1, 1, -1],
    [-1, -1, 1],
    [-1, -1, -1],
].map(makePositionVector);
const cornerDimensions = [0.25, 0.25, 0.25];
const edges = [
    [1, 1, 0],
    [1, 0, 1],
    [1, 0, -1],
    [1, -1, 0],
    [0, 1, 1],
    [0, 1, -1],
    [0, -1, 1],
    [0, -1, -1],
    [-1, 1, 0],
    [-1, 0, 1],
    [-1, 0, -1],
    [-1, -1, 0],
].map(makePositionVector);
const edgeDimensions = edges.map((edge) => edge
    .toArray()
    .map((axis) => (axis == 0 ? 0.5 : 0.25)));
export class GenericController extends Controller {
    constructor(ngZone, state) {
        super(ngZone);
        this.state = state;
        this.click = new EventEmitter();
        this.state.set({
            font: '20px Inter var, Arial, sans-serif',
            faces: defaultFaces,
            color: colors.bg,
            hoverColor: colors.hover,
            textColor: colors.text,
            strokeColor: colors.stroke,
            opacity: 1,
        });
    }
    get props() {
        return [
            'font',
            'opacity',
            'color',
            'hoverColor',
            'textColor',
            'strokeColor',
            'faces',
            'click',
        ];
    }
    get controller() {
        return this.genericController;
    }
    set font(font) {
        this.state.set({ font });
    }
    set opacity(opacity) {
        this.state.set({ opacity });
    }
    set color(color) {
        this.state.set({ color });
    }
    set hoverColor(hoverColor) {
        this.state.set({ hoverColor });
    }
    set textColor(textColor) {
        this.state.set({ textColor });
    }
    set strokeColor(strokeColor) {
        this.state.set({ strokeColor });
    }
    set faces(faces) {
        this.state.set({ faces });
    }
    get rxState() {
        return this.genericController?.rxState || this.state;
    }
    get clickOutput() {
        return this.genericController?.click || this.click;
    }
}
GenericController.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: GenericController, deps: [{ token: i0.NgZone }, { token: i1.EnhancedRxState }], target: i0.ɵɵFactoryTarget.Directive });
GenericController.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.1.1", type: GenericController, selector: "\n    ngt-soba-gizmo-viewcube,\n    ngt-soba-gizmo-edgecube,\n    ngt-soba-gizmo-facecube,\n    ngt-soba-gizmo-face-material\n  ", inputs: { genericController: "genericController", font: "font", opacity: "opacity", color: "color", hoverColor: "hoverColor", textColor: "textColor", strokeColor: "strokeColor", faces: "faces" }, outputs: { click: "click" }, providers: [EnhancedRxState], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: GenericController, decorators: [{
            type: Directive,
            args: [{
                    selector: `
    ngt-soba-gizmo-viewcube,
    ngt-soba-gizmo-edgecube,
    ngt-soba-gizmo-facecube,
    ngt-soba-gizmo-face-material
  `,
                    providers: [EnhancedRxState],
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i1.EnhancedRxState }]; }, propDecorators: { genericController: [{
                type: Input
            }], font: [{
                type: Input
            }], opacity: [{
                type: Input
            }], color: [{
                type: Input
            }], hoverColor: [{
                type: Input
            }], textColor: [{
                type: Input
            }], strokeColor: [{
                type: Input
            }], faces: [{
                type: Input
            }], click: [{
                type: Output
            }] } });
export const [NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER, NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,] = createControllerProviderFactory({
    watchedControllerTokenName: 'Viewcube Generic Controller',
    controller: GenericController,
});
export class NgtSobaGizmoViewcube extends NgtSobaExtender {
    constructor(genericController, gizmoHelperStore) {
        super();
        this.genericController = genericController;
        this.gizmoHelperStore = gizmoHelperStore;
        this.corners = corners;
        this.edges = edges;
        this.cornerDimensions = cornerDimensions;
        this.edgeDimensions = edgeDimensions;
        this.gizmo$ = this.gizmoHelperStore.select('gizmo');
    }
}
NgtSobaGizmoViewcube.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcube, deps: [{ token: NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER }, { token: i2.NgtSobaGizmoHelperStore }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoViewcube.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoViewcube, selector: "ngt-soba-gizmo-viewcube", providers: [
        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
        {
            provide: NgtSobaExtender,
            useExisting: NgtSobaGizmoViewcube,
        },
    ], usesInheritance: true, ngImport: i0, template: `
    <ngt-group
      *ngIf="gizmo$ | async as gizmo"
      [appendTo]="gizmo"
      [scale]="[60, 60, 60]"
      (ready)="object = $event"
    >
      <ngt-soba-gizmo-facecube
        [genericController]="genericController"
      ></ngt-soba-gizmo-facecube>

      <ngt-soba-gizmo-edgecube
        *ngFor="let edge of edges; index as i"
        [position]="edge"
        [dimensions]="edgeDimensions[i]"
        [genericController]="genericController"
      ></ngt-soba-gizmo-edgecube>

      <ngt-soba-gizmo-edgecube
        *ngFor="let corner of corners"
        [position]="corner"
        [dimensions]="cornerDimensions"
        [genericController]="genericController"
      ></ngt-soba-gizmo-edgecube>

      <ngt-ambient-light [intensity]="0.5"></ngt-ambient-light>
      <ngt-point-light
        [intensity]="0.5"
        [position]="[10, 10, 10]"
      ></ngt-point-light>
    </ngt-group>
  `, isInline: true, components: [{ type: i0.forwardRef(function () { return NgtSobaGizmoFacecube; }), selector: "ngt-soba-gizmo-facecube" }, { type: i0.forwardRef(function () { return NgtSobaGizmoEdgecube; }), selector: "ngt-soba-gizmo-edgecube[dimensions][position]", inputs: ["dimensions", "position"] }], directives: [{ type: i0.forwardRef(function () { return i3.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i4.NgtGroup; }), selector: "ngt-group", outputs: ["ready"], exportAs: ["ngtGroup"] }, { type: i0.forwardRef(function () { return i1.NgtObject3dController; }), selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera  ", exportAs: ["ngtObject3dController"] }, { type: i0.forwardRef(function () { return i1.NgtObject3dInputsController; }), selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i0.forwardRef(function () { return GenericController; }), selector: "\n    ngt-soba-gizmo-viewcube,\n    ngt-soba-gizmo-edgecube,\n    ngt-soba-gizmo-facecube,\n    ngt-soba-gizmo-face-material\n  ", inputs: ["genericController", "font", "opacity", "color", "hoverColor", "textColor", "strokeColor", "faces"], outputs: ["click"] }, { type: i0.forwardRef(function () { return i3.NgForOf; }), selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i0.forwardRef(function () { return i5.NgtAmbientLight; }), selector: "ngt-ambient-light", inputs: ["args"], exportAs: ["ngtAmbientLight"] }, { type: i0.forwardRef(function () { return i5.NgtPointLight; }), selector: "ngt-point-light", inputs: ["args"], exportAs: ["ngtPointLight"] }], pipes: { "async": i0.forwardRef(function () { return i3.AsyncPipe; }) }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcube, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-viewcube',
                    template: `
    <ngt-group
      *ngIf="gizmo$ | async as gizmo"
      [appendTo]="gizmo"
      [scale]="[60, 60, 60]"
      (ready)="object = $event"
    >
      <ngt-soba-gizmo-facecube
        [genericController]="genericController"
      ></ngt-soba-gizmo-facecube>

      <ngt-soba-gizmo-edgecube
        *ngFor="let edge of edges; index as i"
        [position]="edge"
        [dimensions]="edgeDimensions[i]"
        [genericController]="genericController"
      ></ngt-soba-gizmo-edgecube>

      <ngt-soba-gizmo-edgecube
        *ngFor="let corner of corners"
        [position]="corner"
        [dimensions]="cornerDimensions"
        [genericController]="genericController"
      ></ngt-soba-gizmo-edgecube>

      <ngt-ambient-light [intensity]="0.5"></ngt-ambient-light>
      <ngt-point-light
        [intensity]="0.5"
        [position]="[10, 10, 10]"
      ></ngt-point-light>
    </ngt-group>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
                        {
                            provide: NgtSobaExtender,
                            useExisting: NgtSobaGizmoViewcube,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: GenericController, decorators: [{
                    type: Inject,
                    args: [NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER]
                }] }, { type: i2.NgtSobaGizmoHelperStore }]; } });
export class NgtSobaGizmoEdgecube extends NgtSobaExtender {
    constructor(genericController, gizmoHelperStore, state) {
        super();
        this.genericController = genericController;
        this.gizmoHelperStore = gizmoHelperStore;
        this.state = state;
        this.hover = false;
        this.raycast$ = this.gizmoHelperStore.select('raycast');
        this.vm$ = combineLatest([
            this.state.select(selectSlice(['dimensions', 'position'])),
            this.genericController.rxState
                .select('hoverColor')
                .pipe(startWith(this.genericController.rxState.get('hoverColor'))),
        ]).pipe(map(([{ dimensions, position }, hoverColor]) => ({
            dimensions,
            position,
            hoverColor,
        })));
    }
    set dimensions(dimensions) {
        this.state.set({ dimensions });
    }
    set position(position) {
        this.state.set({ position });
    }
    onEdgeClick($event) {
        if (this.genericController.clickOutput.observed) {
            this.genericController.clickOutput.emit($event);
        }
        else {
            $event.stopPropagation();
            this.gizmoHelperStore.tweenCamera(this.state.get('position'));
        }
    }
}
NgtSobaGizmoEdgecube.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoEdgecube, deps: [{ token: NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER }, { token: i2.NgtSobaGizmoHelperStore }, { token: i1.EnhancedRxState }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoEdgecube.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoEdgecube, selector: "ngt-soba-gizmo-edgecube[dimensions][position]", inputs: { dimensions: "dimensions", position: "position" }, providers: [
        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
        EnhancedRxState,
        {
            provide: NgtSobaExtender,
            useExisting: NgtSobaGizmoEdgecube,
        },
    ], usesInheritance: true, ngImport: i0, template: `
    <ng-container *ngIf="vm$ | async as vm">
      <ngt-soba-box
        [args]="vm.dimensions"
        [raycast]="raycast$ | async"
        [scale]="[1.01, 1.01, 1.01]"
        [position]="vm.position"
        (pointerover)="$event.stopPropagation(); hover = true"
        (pointerout)="$event.stopPropagation(); hover = false"
        (click)="onEdgeClick($event)"
      >
        <ngt-mesh-basic-material
          [parameters]="{
            color: hover ? vm.hoverColor : 'white',
            transparent: true,
            opacity: 0.6,
            visible: hover
          }"
        ></ngt-mesh-basic-material>
      </ngt-soba-box>
    </ng-container>
  `, isInline: true, components: [{ type: i6.NgtSobaBox, selector: "ngt-soba-box", inputs: ["args"] }], directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgtObject3dInputsController, selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i1.NgtContentMaterialController, selector: "    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-text,,    ngt-points  ", inputs: ["material", "isMaterialArray", "contentMaterialController"], exportAs: ["ngtContentMaterialController"] }, { type: i7.NgtMeshBasicMaterial, selector: "ngt-mesh-basic-material", exportAs: ["ngtMeshBasicMaterial"] }], pipes: { "async": i3.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoEdgecube, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-edgecube[dimensions][position]',
                    template: `
    <ng-container *ngIf="vm$ | async as vm">
      <ngt-soba-box
        [args]="vm.dimensions"
        [raycast]="raycast$ | async"
        [scale]="[1.01, 1.01, 1.01]"
        [position]="vm.position"
        (pointerover)="$event.stopPropagation(); hover = true"
        (pointerout)="$event.stopPropagation(); hover = false"
        (click)="onEdgeClick($event)"
      >
        <ngt-mesh-basic-material
          [parameters]="{
            color: hover ? vm.hoverColor : 'white',
            transparent: true,
            opacity: 0.6,
            visible: hover
          }"
        ></ngt-mesh-basic-material>
      </ngt-soba-box>
    </ng-container>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
                        EnhancedRxState,
                        {
                            provide: NgtSobaExtender,
                            useExisting: NgtSobaGizmoEdgecube,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: GenericController, decorators: [{
                    type: Inject,
                    args: [NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER]
                }] }, { type: i2.NgtSobaGizmoHelperStore }, { type: i1.EnhancedRxState }]; }, propDecorators: { dimensions: [{
                type: Input
            }], position: [{
                type: Input
            }] } });
export class NgtSobaGizmoFacecube extends NgtSobaExtender {
    constructor(genericController, gizmoHelperStore) {
        super();
        this.genericController = genericController;
        this.gizmoHelperStore = gizmoHelperStore;
        this.hover = null;
        this.raycast$ = this.gizmoHelperStore.select('raycast');
    }
    onFacePointerMove($event) {
        $event.stopPropagation();
        this.hover = Math.floor($event.faceIndex / 2);
    }
    onFacePointerOut($event) {
        $event.stopPropagation();
        this.hover = null;
    }
    onFaceClick($event) {
        if (this.genericController.clickOutput.observed) {
            this.genericController.clickOutput.emit($event);
        }
        else {
            $event.stopPropagation();
            this.gizmoHelperStore.tweenCamera($event.face.normal);
        }
    }
}
NgtSobaGizmoFacecube.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoFacecube, deps: [{ token: NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER }, { token: i2.NgtSobaGizmoHelperStore }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoFacecube.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoFacecube, selector: "ngt-soba-gizmo-facecube", providers: [
        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
        {
            provide: NgtSobaExtender,
            useExisting: NgtSobaGizmoFacecube,
        },
    ], usesInheritance: true, ngImport: i0, template: `
    <ngt-soba-box
      [isMaterialArray]="true"
      [raycast]="raycast$ | async"
      (ready)="object = $event"
      (click)="onFaceClick($event)"
      (pointermove)="onFacePointerMove($event)"
      (pointerout)="onFacePointerOut($event)"
    >
      <ngt-soba-gizmo-face-material
        *repeat="let index of 6"
        [hover]="hover === index"
        [index]="index"
        [genericController]="genericController"
      ></ngt-soba-gizmo-face-material>
    </ngt-soba-box>
  `, isInline: true, components: [{ type: i0.forwardRef(function () { return i6.NgtSobaBox; }), selector: "ngt-soba-box", inputs: ["args"] }, { type: i0.forwardRef(function () { return NgtSobaGizmoFaceMaterial; }), selector: "ngt-soba-gizmo-face-material[hover][index]", inputs: ["hover", "index"] }], directives: [{ type: i0.forwardRef(function () { return i1.NgtObject3dInputsController; }), selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i0.forwardRef(function () { return i1.NgtContentMaterialController; }), selector: "    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-text,,    ngt-points  ", inputs: ["material", "isMaterialArray", "contentMaterialController"], exportAs: ["ngtContentMaterialController"] }, { type: i0.forwardRef(function () { return i1.NgtRepeat; }), selector: "[repeat][repeatOf]", inputs: ["repeatOf"] }, { type: i0.forwardRef(function () { return GenericController; }), selector: "\n    ngt-soba-gizmo-viewcube,\n    ngt-soba-gizmo-edgecube,\n    ngt-soba-gizmo-facecube,\n    ngt-soba-gizmo-face-material\n  ", inputs: ["genericController", "font", "opacity", "color", "hoverColor", "textColor", "strokeColor", "faces"], outputs: ["click"] }], pipes: { "async": i0.forwardRef(function () { return i3.AsyncPipe; }) }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoFacecube, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-facecube',
                    template: `
    <ngt-soba-box
      [isMaterialArray]="true"
      [raycast]="raycast$ | async"
      (ready)="object = $event"
      (click)="onFaceClick($event)"
      (pointermove)="onFacePointerMove($event)"
      (pointerout)="onFacePointerOut($event)"
    >
      <ngt-soba-gizmo-face-material
        *repeat="let index of 6"
        [hover]="hover === index"
        [index]="index"
        [genericController]="genericController"
      ></ngt-soba-gizmo-face-material>
    </ngt-soba-box>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER,
                        {
                            provide: NgtSobaExtender,
                            useExisting: NgtSobaGizmoFacecube,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: GenericController, decorators: [{
                    type: Inject,
                    args: [NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER]
                }] }, { type: i2.NgtSobaGizmoHelperStore }]; } });
export class NgtSobaGizmoFaceMaterial {
    constructor(genericController, state, store, document) {
        this.genericController = genericController;
        this.state = state;
        this.store = store;
        this.parameter$ = combineLatest([
            this.state.select(selectSlice(['hover', 'index', 'texture'])),
            this.genericController.rxState.select(selectSlice(['hoverColor', 'opacity']), startWith({
                hoverColor: this.genericController.rxState.get('hoverColor'),
                opacity: this.genericController.rxState.get('opacity'),
            })),
            this.store.select('renderer'),
        ]).pipe(map(([{ texture, hover }, { hoverColor, opacity }, renderer]) => {
            texture.anisotropy = renderer.capabilities.getMaxAnisotropy() || 1;
            return {
                texture,
                color: hover ? hoverColor : 'white',
                opacity: opacity,
            };
        }));
        _NgtSobaGizmoFaceMaterial_change$.set(this, combineLatest([
            this.state.select('index'),
            this.genericController.rxState.select(selectSlice(['font', 'color', 'textColor', 'strokeColor'])),
        ]).pipe(map(([index, { font, color, textColor, strokeColor }]) => ({
            index,
            font,
            color,
            textColor,
            strokeColor,
        }))));
        this.state.connect('texture', __classPrivateFieldGet(this, _NgtSobaGizmoFaceMaterial_change$, "f"), (_, { index, font, color, textColor, strokeColor }) => {
            const faces = this.genericController.rxState.get('faces');
            const canvas = document.createElement('canvas');
            canvas.width = 128;
            canvas.height = 128;
            const context = canvas.getContext('2d');
            context.fillStyle = color;
            context.fillRect(0, 0, canvas.width, canvas.height);
            context.strokeStyle = strokeColor;
            context.strokeRect(0, 0, canvas.width, canvas.height);
            context.font = font;
            context.textAlign = 'center';
            context.fillStyle = textColor;
            context.fillText(faces[index].toUpperCase(), 64, 76);
            return new THREE.CanvasTexture(canvas);
        });
    }
    set hover(hover) {
        this.state.set({ hover });
    }
    set index(index) {
        this.state.set({ index });
    }
}
_NgtSobaGizmoFaceMaterial_change$ = new WeakMap();
NgtSobaGizmoFaceMaterial.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoFaceMaterial, deps: [{ token: NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER }, { token: i1.EnhancedRxState }, { token: i1.NgtStore }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoFaceMaterial.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoFaceMaterial, selector: "ngt-soba-gizmo-face-material[hover][index]", inputs: { hover: "hover", index: "index" }, providers: [NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER, EnhancedRxState], ngImport: i0, template: `
    <ngt-mesh-lambert-material
      *ngIf="parameter$ | async as parameter"
      [parameters]="{
        map: parameter.texture,
        color: parameter.color,
        opacity: parameter.opacity,
        transparent: true
      }"
    ></ngt-mesh-lambert-material>
  `, isInline: true, directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.NgtMeshLambertMaterial, selector: "ngt-mesh-lambert-material", exportAs: ["ngtMeshLambertMaterial"] }], pipes: { "async": i3.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoFaceMaterial, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-face-material[hover][index]',
                    template: `
    <ngt-mesh-lambert-material
      *ngIf="parameter$ | async as parameter"
      [parameters]="{
        map: parameter.texture,
        color: parameter.color,
        opacity: parameter.opacity,
        transparent: true
      }"
    ></ngt-mesh-lambert-material>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [NGT_VIEWCUBE_GENERIC_CONTROLLER_PROVIDER, EnhancedRxState],
                }]
        }], ctorParameters: function () { return [{ type: GenericController, decorators: [{
                    type: Inject,
                    args: [NGT_VIEWCUBE_GENERIC_WATCHED_CONTROLLER]
                }] }, { type: i1.EnhancedRxState }, { type: i1.NgtStore }, { type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { hover: [{
                type: Input
            }], index: [{
                type: Input
            }] } });
export class NgtSobaGizmoViewcubeModule {
}
NgtSobaGizmoViewcubeModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcubeModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
NgtSobaGizmoViewcubeModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcubeModule, declarations: [GenericController, NgtSobaGizmoViewcube, NgtSobaGizmoEdgecube, NgtSobaGizmoFacecube, NgtSobaGizmoFaceMaterial], imports: [NgtGroupModule,
        NgtAmbientLightModule,
        NgtPointLightModule,
        NgtMeshLambertMaterialModule,
        CommonModule,
        NgtRepeatModule,
        NgtMeshBasicMaterialModule,
        NgtSobaBoxModule], exports: [NgtSobaGizmoViewcube, GenericController] });
NgtSobaGizmoViewcubeModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcubeModule, imports: [[
            NgtGroupModule,
            NgtAmbientLightModule,
            NgtPointLightModule,
            NgtMeshLambertMaterialModule,
            CommonModule,
            NgtRepeatModule,
            NgtMeshBasicMaterialModule,
            NgtSobaBoxModule,
        ]] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewcubeModule, decorators: [{
            type: NgModule,
            args: [{
                    declarations: [
                        GenericController,
                        NgtSobaGizmoViewcube,
                        NgtSobaGizmoEdgecube,
                        NgtSobaGizmoFacecube,
                        NgtSobaGizmoFaceMaterial,
                    ],
                    exports: [NgtSobaGizmoViewcube, GenericController],
                    imports: [
                        NgtGroupModule,
                        NgtAmbientLightModule,
                        NgtPointLightModule,
                        NgtMeshLambertMaterialModule,
                        CommonModule,
                        NgtRepeatModule,
                        NgtMeshBasicMaterialModule,
                        NgtSobaBoxModule,
                    ],
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l6bW8tdmlld2N1YmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvc29iYS9hYnN0cmFjdGlvbnMvc3JjL2dpem1vLWhlbHBlci9naXptby12aWV3Y3ViZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLEVBQ0wsVUFBVSxFQUNWLCtCQUErQixFQUMvQixlQUFlLEVBRWYsZUFBZSxFQUNmLGVBQWUsRUFDZixRQUFRLEdBQ1QsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUNMLHFCQUFxQixFQUNyQixtQkFBbUIsR0FDcEIsTUFBTSw0QkFBNEIsQ0FBQztBQUNwQyxPQUFPLEVBQ0wsMEJBQTBCLEVBQzFCLDRCQUE0QixHQUM3QixNQUFNLCtCQUErQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzlELE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDekQsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsU0FBUyxFQUNULFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUNMLFFBQVEsRUFDUixNQUFNLEVBQ04sTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLEdBQUcsRUFBYyxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDakUsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDL0IsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sc0JBQXNCLENBQUM7Ozs7Ozs7OztBQWEvRCxNQUFNLE1BQU0sR0FBRyxFQUFFLEVBQUUsRUFB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biAgY3JlYXRlQ29udHJvbGxlclByb3ZpZGVyRmFjdG9yeSxcbiAgRW5oYW5jZWRSeFN0YXRlLFxuICBOZ3RFdmVudCxcbiAgTmd0UmVwZWF0TW9kdWxlLFxuICBOZ3RTb2JhRXh0ZW5kZXIsXG4gIE5ndFN0b3JlLFxufSBmcm9tICdAYW5ndWxhci10aHJlZS9jb3JlJztcbmltcG9ydCB7IE5ndEdyb3VwTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvY29yZS9ncm91cCc7XG5pbXBvcnQge1xuICBOZ3RBbWJpZW50TGlnaHRNb2R1bGUsXG4gIE5ndFBvaW50TGlnaHRNb2R1bGUsXG59IGZyb20gJ0Bhbmd1bGFyLXRocmVlL2NvcmUvbGlnaHRzJztcbmltcG9ydCB7XG4gIE5ndE1lc2hCYXNpY01hdGVyaWFsTW9kdWxlLFxuICBOZ3RNZXNoTGFtYmVydE1hdGVyaWFsTW9kdWxlLFxufSBmcm9tICdAYW5ndWxhci10aHJlZS9jb3JlL21hdGVyaWFscyc7XG5pbXBvcnQgeyBOZ3RTb2JhQm94TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvc29iYS9zaGFwZXMnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlLCBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBEaXJlY3RpdmUsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgTmdNb2R1bGUsXG4gIE5nWm9uZSxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHNlbGVjdFNsaWNlIH0gZnJvbSAnQHJ4LWFuZ3VsYXIvc3RhdGUnO1xuaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgbWFwLCBPYnNlcnZhYmxlLCBzdGFydFdpdGggfSBmcm9tICdyeGpzJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCB7IE5ndFNvYmFHaXptb0hlbHBlclN0b3JlIH0gZnJvbSAnLi9naXptby1oZWxwZXIuc3RvcmUnO1xuXG50eXBlIFhZWiA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbnR5cGUgR2VuZXJpY1Byb3BzID0ge1xuICBmb250OiBzdHJpbmc7XG4gIG9wYWNpdHk6IG51bWJlcjtcbiAgY29sb3I6IHN0cmluZztcbiAgaG92ZXJDb2xvcjogc3RyaW5nO1xuICB0ZXh0Q29sb3I6IHN0cmluZztcbiAgc3Ryb2tlQ29sb3I6IHN0cmluZztcbiAgZmFjZXM6IHN0cmluZ1tdO1xufTtcblxuY29uc3QgY29sb3JzID0geyBiZzogJyNmMGYwZjAnLCBob3ZlcjogJyM5OTknLCB0ZXh0OiAnYmxhY2snLCBzdHJva2U6ICdibGFjaycgfTtcbmNvbnN0IGRlZmF1bHRGYWNlcyA9IFsnUmlnaHQnLCAnTGVmdCcsICdUb3AnLCAnQm90dG9tJywgJ0Zyb250JywgJ0JhY2snXTtcbmNvbnN0IG1ha2VQb3NpdGlvblZlY3RvciA9ICh4eXo6IG51bWJlcltdKSA9PlxuICBuZXcgVEhSRUUuVmVjdG9yMyguLi54eXopLm11bHRpcGx5U2NhbGFyKDAuMzgpO1xuXG5jb25zdCBjb3JuZXJzOiBUSFJFRS5WZWN0b3IzW10gPSBbXG4gIFsxLCAxLCAxXSxcbiAgWzEsIDEsIC0xXSxcbiAgWzEsIC0xLCAxXSxcbiAgWzEsIC0xLCAtMV0sXG4gIFstMSwgMSwgMV0sXG4gIFstMSwgMSwgLTFdLFxuICBbLTEsIC0xLCAxXSxcbiAgWy0xLCAtMSwgLTFdLFxuXS5tYXAobWFrZVBvc2l0aW9uVmVjdG9yKTtcblxuY29uc3QgY29ybmVyRGltZW5zaW9uczogWFlaID0gWzAuMjUsIDAuMjUsIDAuMjVdO1xuXG5jb25zdCBlZGdlczogVEhSRUUuVmVjdG9yM1tdID0gW1xuICBbMSwgMSwgMF0sXG4gIFsxLCAwLCAxXSxcbiAgWzEsIDAsIC0xXSxcbiAgWzEsIC0xLCAwXSxcbiAgWzAsIDEsIDFdLFxuICBbMCwgMSwgLTFdLFxuICBbMCwgLTEsIDFdLFxuICBbMCwgLTEsIC0xXSxcbiAgWy0xLCAxLCAwXSxcbiAgWy0xLCAwLCAxXSxcbiAgWy0xLCAwLCAtMV0sXG4gIFstMSwgLTEsIDBdLFxuXS5tYXAobWFrZVBvc2l0aW9uVmVjdG9yKTtcblxuY29uc3QgZWRnZURpbWVuc2lvbnMgPSBlZGdlcy5tYXAoXG4gIChlZGdlKSA9PlxuICAgIGVkZ2VcbiAgICAgIC50b0FycmF5KClcbiAgICAgIC5tYXAoKGF4aXM6IG51bWJlcik6IG51bWJlciA9PiAoYXhpcyA9PSAwID8gMC41IDogMC4yNSkpIGFzIFhZWlxuKTtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiBgXG4gICAgbmd0LXNvYmEtZ2l6bW8tdmlld2N1YmUsXG4gICAgbmd0LXNvYmEtZ2l6bW8tZWRnZWN1YmUsXG4gICAgbmd0LXNvYmEtZ2l6bW8tZmFjZWN1YmUsXG4gICAgbmd0LXNvYmEtZ2l6bW8tZmFjZS1tYXRlcmlhbFxuICBgLFxuICBwcm92aWRlcnM6IFtFbmhhbmNlZFJ4U3RhdGVdLFxufSlcbmV4cG9ydCBjbGFzcyBHZW5lcmljQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuICBnZXQgcHJvcHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXG4gICAgICAnZm9udCcsXG4gICAgICAnb3BhY2l0eScsXG4gICAgICAnY29sb3InLFxuICAgICAgJ2hvdmVyQ29sb3InLFxuICAgICAgJ3RleHRDb2xvcicsXG4gICAgICAnc3Ryb2tlQ29sb3InLFxuICAgICAgJ2ZhY2VzJyxcbiAgICAgICdjbGljaycsXG4gICAgXTtcbiAgfVxuXG4gIGdldCBjb250cm9sbGVyKCk6IENvbnRyb2xsZXIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmdlbmVyaWNDb250cm9sbGVyO1xuICB9XG5cbiAgQElucHV0KCkgZ2VuZXJpY0NvbnRyb2xsZXI/OiBHZW5lcmljQ29udHJvbGxlcjtcblxuICBASW5wdXQoKSBzZXQgZm9udChmb250OiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGZvbnQgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb3BhY2l0eShvcGFjaXR5OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IG9wYWNpdHkgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgY29sb3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuc2V0KHsgY29sb3IgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaG92ZXJDb2xvcihob3ZlckNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGhvdmVyQ29sb3IgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgdGV4dENvbG9yKHRleHRDb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyB0ZXh0Q29sb3IgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc3Ryb2tlQ29sb3Ioc3Ryb2tlQ29sb3I6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuc2V0KHsgc3Ryb2tlQ29sb3IgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgZmFjZXMoZmFjZXM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyBmYWNlcyB9KTtcbiAgfVxuXG4gIEBPdXRwdXQoKSBjbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8Tmd0RXZlbnQ8TW91c2VFdmVudD4+KCk7XG5cbiAgY29uc3RydWN0b3Iobmdab25lOiBOZ1pvbmUsIHByaXZhdGUgc3RhdGU6IEVuaGFuY2VkUnhTdGF0ZTxHZW5lcmljUHJvcHM+KSB7XG4gICAgc3VwZXIobmdab25lKTtcbiAgICB0aGlzLnN0YXRlLnNldCh7XG4gICAgICBmb250OiAnMjBweCBJbnRlciB2YXIsIEFyaWFsLCBzYW5zLXNlcmlmJyxcbiAgICAgIGZhY2VzOiBkZWZhdWx0RmFjZXMsXG4gICAgICBjb2xvcjogY29sb3JzLmJnLFxuICAgICAgaG92ZXJDb2xvcjogY29sb3JzLmhvdmVyLFxuICAgICAgdGV4dENvbG9yOiBjb2xvcnMudGV4dCxcbiAgICAgIHN0cm9rZUNvbG9yOiBjb2xvcnMuc3Ryb2tlLFxuICAgICAgb3BhY2l0eTogMSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldCByeFN0YXRlKCk6IEVuaGFuY2VkUnhTdGF0ZTxHZW5lcmljUHJvcHM+IHtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmljQ29udHJvbGxlcj8ucnhTdGF0ZSB8fCB0aGlzLnN0YXRlO1xuICB9XG5cbiAgZ2V0IGNsaWNrT3V0cHV0KCk6IEV2ZW50RW1pdHRlcjxOZ3RFdmVudDxNb3VzZUV2ZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLmdlbmVyaWNDb250cm9sbGVyPy5jbGljayB8fCB0aGlzLmNsaWNrO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBbXG4gIE5HVF9WSUVXQ1VCRV9HRU5FUklDX1dBVENIRURfQ09OVFJPTExFUixcbiAgTkdUX1ZJRVdDVUJFX0dFTkVSSUNfQ09OVFJPTExFUl9QUk9WSURFUixcbl0gPSBjcmVhdGVDb250cm9sbGVyUHJvdmlkZXJGYWN0b3J5KHtcbiAgd2F0Y2hlZENvbnRyb2xsZXJUb2tlbk5hbWU6ICdWaWV3Y3ViZSBHZW5lcmljIENvbnRyb2xsZXInLFxuICBjb250cm9sbGVyOiBHZW5lcmljQ29udHJvbGxlcixcbn0pO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3Qtc29iYS1naXptby12aWV3Y3ViZScsXG4gIHRlbXBsYXRlOiBgXG4gICAgPG5ndC1ncm91cFxuICAgICAgKm5nSWY9XCJnaXptbyQgfCBhc3luYyBhcyBnaXptb1wiXG4gICAgICBbYXBwZW5kVG9dPVwiZ2l6bW9cIlxuICAgICAgW3NjYWxlXT1cIls2MCwgNjAsIDYwXVwiXG4gICAgICAocmVhZHkpPVwib2JqZWN0ID0gJGV2ZW50XCJcbiAgICA+XG4gICAgICA8bmd0LXNvYmEtZ2l6bW8tZmFjZWN1YmVcbiAgICAgICAgW2dlbmVyaWNDb250cm9sbGVyXT1cImdlbmVyaWNDb250cm9sbGVyXCJcbiAgICAgID48L25ndC1zb2JhLWdpem1vLWZhY2VjdWJlPlxuXG4gICAgICA8bmd0LXNvYmEtZ2l6bW8tZWRnZWN1YmVcbiAgICAgICAgKm5nRm9yPVwibGV0IGVkZ2Ugb2YgZWRnZXM7IGluZGV4IGFzIGlcIlxuICAgICAgICBbcG9zaXRpb25dPVwiZWRnZVwiXG4gICAgICAgIFtkaW1lbnNpb25zXT1cImVkZ2VEaW1lbnNpb25zW2ldXCJcbiAgICAgICAgW2dlbmVyaWNDb250cm9sbGVyXT1cImdlbmVyaWNDb250cm9sbGVyXCJcbiAgICAgID48L25ndC1zb2JhLWdpem1vLWVkZ2VjdWJlPlxuXG4gICAgICA8bmd0LXNvYmEtZ2l6bW8tZWRnZWN1YmVcbiAgICAgICAgKm5nRm9yPVwibGV0IGNvcm5lciBvZiBjb3JuZXJzXCJcbiAgICAgICAgW3Bvc2l0aW9uXT1cImNvcm5lclwiXG4gICAgICAgIFtkaW1lbnNpb25zXT1cImNvcm5lckRpbWVuc2lvbnNcIlxuICAgICAgICBbZ2VuZXJpY0NvbnRyb2xsZXJdPVwiZ2VuZXJpY0NvbnRyb2xsZXJcIlxuICAgICAgPjwvbmd0LXNvYmEtZ2l6bW8tZWRnZWN1YmU+XG5cbiAgICAgIDxuZ3QtYW1iaWVudC1saWdodCBbaW50ZW5zaXR5XT1cIjAuNVwiPjwvbmd0LWFtYmllbnQtbGlnaHQ+XG4gICAgICA8bmd0LXBvaW50LWxpZ2h0XG4gICAgICAgIFtpbnRlbnNpdHldPVwiMC41XCJcbiAgICAgICAgW3Bvc2l0aW9uXT1cIlsxMCwgMTAsIDEwXVwiXG4gICAgICA+PC9uZ3QtcG9pbnQtbGlnaHQ+XG4gICAgPC9uZ3QtZ3JvdXA+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICBOR1RfVklFV0NVQkVfR0VORVJJQ19DT05UUk9MTEVSX1BST1ZJREVSLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5ndFNvYmFFeHRlbmRlcixcbiAgICAgIHVzZUV4aXN0aW5nOiBOZ3RTb2JhR2l6bW9WaWV3Y3ViZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RTb2JhR2l6bW9WaWV3Y3ViZSBleHRlbmRzIE5ndFNvYmFFeHRlbmRlcjxUSFJFRS5Hcm91cD4ge1xuICBjb3JuZXJzID0gY29ybmVycztcbiAgZWRnZXMgPSBlZGdlcztcbiAgY29ybmVyRGltZW5zaW9ucyA9IGNvcm5lckRpbWVuc2lvbnM7XG4gIGVkZ2VEaW1lbnNpb25zID0gZWRnZURpbWVuc2lvbnM7XG5cbiAgcmVhZG9ubHkgZ2l6bW8kID0gdGhpcy5naXptb0hlbHBlclN0b3JlLnNlbGVjdCgnZ2l6bW8nKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HVF9WSUVXQ1VCRV9HRU5FUklDX1dBVENIRURfQ09OVFJPTExFUilcbiAgICBwdWJsaWMgZ2VuZXJpY0NvbnRyb2xsZXI6IEdlbmVyaWNDb250cm9sbGVyLFxuICAgIHByaXZhdGUgZ2l6bW9IZWxwZXJTdG9yZTogTmd0U29iYUdpem1vSGVscGVyU3RvcmVcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3Qtc29iYS1naXptby1lZGdlY3ViZVtkaW1lbnNpb25zXVtwb3NpdGlvbl0nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJ2bSQgfCBhc3luYyBhcyB2bVwiPlxuICAgICAgPG5ndC1zb2JhLWJveFxuICAgICAgICBbYXJnc109XCJ2bS5kaW1lbnNpb25zXCJcbiAgICAgICAgW3JheWNhc3RdPVwicmF5Y2FzdCQgfCBhc3luY1wiXG4gICAgICAgIFtzY2FsZV09XCJbMS4wMSwgMS4wMSwgMS4wMV1cIlxuICAgICAgICBbcG9zaXRpb25dPVwidm0ucG9zaXRpb25cIlxuICAgICAgICAocG9pbnRlcm92ZXIpPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyBob3ZlciA9IHRydWVcIlxuICAgICAgICAocG9pbnRlcm91dCk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IGhvdmVyID0gZmFsc2VcIlxuICAgICAgICAoY2xpY2spPVwib25FZGdlQ2xpY2soJGV2ZW50KVwiXG4gICAgICA+XG4gICAgICAgIDxuZ3QtbWVzaC1iYXNpYy1tYXRlcmlhbFxuICAgICAgICAgIFtwYXJhbWV0ZXJzXT1cIntcbiAgICAgICAgICAgIGNvbG9yOiBob3ZlciA/IHZtLmhvdmVyQ29sb3IgOiAnd2hpdGUnLFxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjYsXG4gICAgICAgICAgICB2aXNpYmxlOiBob3ZlclxuICAgICAgICAgIH1cIlxuICAgICAgICA+PC9uZ3QtbWVzaC1iYXNpYy1tYXRlcmlhbD5cbiAgICAgIDwvbmd0LXNvYmEtYm94PlxuICAgIDwvbmctY29udGFpbmVyPlxuICBgLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAgTkdUX1ZJRVdDVUJFX0dFTkVSSUNfQ09OVFJPTExFUl9QUk9WSURFUixcbiAgICBFbmhhbmNlZFJ4U3RhdGUsXG4gICAge1xuICAgICAgcHJvdmlkZTogTmd0U29iYUV4dGVuZGVyLFxuICAgICAgdXNlRXhpc3Rpbmc6IE5ndFNvYmFHaXptb0VkZ2VjdWJlLFxuICAgIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE5ndFNvYmFHaXptb0VkZ2VjdWJlIGV4dGVuZHMgTmd0U29iYUV4dGVuZGVyPFRIUkVFLk1lc2g+IHtcbiAgQElucHV0KCkgc2V0IGRpbWVuc2lvbnMoZGltZW5zaW9uczogWFlaKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyBkaW1lbnNpb25zIH0pO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHBvc2l0aW9uKHBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyBwb3NpdGlvbiB9KTtcbiAgfVxuXG4gIGhvdmVyID0gZmFsc2U7XG4gIHJlYWRvbmx5IHJheWNhc3QkID0gdGhpcy5naXptb0hlbHBlclN0b3JlLnNlbGVjdCgncmF5Y2FzdCcpO1xuXG4gIHJlYWRvbmx5IHZtJDogT2JzZXJ2YWJsZTx7XG4gICAgZGltZW5zaW9uczogWFlaO1xuICAgIHBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzO1xuICAgIGhvdmVyQ29sb3I6IHN0cmluZztcbiAgfT4gPSBjb21iaW5lTGF0ZXN0KFtcbiAgICB0aGlzLnN0YXRlLnNlbGVjdChzZWxlY3RTbGljZShbJ2RpbWVuc2lvbnMnLCAncG9zaXRpb24nXSkpLFxuICAgIHRoaXMuZ2VuZXJpY0NvbnRyb2xsZXIucnhTdGF0ZVxuICAgICAgLnNlbGVjdCgnaG92ZXJDb2xvcicpXG4gICAgICAucGlwZShzdGFydFdpdGgodGhpcy5nZW5lcmljQ29udHJvbGxlci5yeFN0YXRlLmdldCgnaG92ZXJDb2xvcicpKSksXG4gIF0pLnBpcGUoXG4gICAgbWFwKChbeyBkaW1lbnNpb25zLCBwb3NpdGlvbiB9LCBob3ZlckNvbG9yXSkgPT4gKHtcbiAgICAgIGRpbWVuc2lvbnMsXG4gICAgICBwb3NpdGlvbixcbiAgICAgIGhvdmVyQ29sb3IsXG4gICAgfSkpXG4gICk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChOR1RfVklFV0NVQkVfR0VORVJJQ19XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgcHVibGljIGdlbmVyaWNDb250cm9sbGVyOiBHZW5lcmljQ29udHJvbGxlcixcbiAgICBwcml2YXRlIGdpem1vSGVscGVyU3RvcmU6IE5ndFNvYmFHaXptb0hlbHBlclN0b3JlLFxuICAgIHByaXZhdGUgc3RhdGU6IEVuaGFuY2VkUnhTdGF0ZTx7IGRpbWVuc2lvbnM6IFhZWjsgcG9zaXRpb246IFRIUkVFLlZlY3RvcjMgfT5cbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIG9uRWRnZUNsaWNrKCRldmVudDogTmd0RXZlbnQ8TW91c2VFdmVudD4pIHtcbiAgICBpZiAodGhpcy5nZW5lcmljQ29udHJvbGxlci5jbGlja091dHB1dC5vYnNlcnZlZCkge1xuICAgICAgdGhpcy5nZW5lcmljQ29udHJvbGxlci5jbGlja091dHB1dC5lbWl0KCRldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuZ2l6bW9IZWxwZXJTdG9yZS50d2VlbkNhbWVyYSh0aGlzLnN0YXRlLmdldCgncG9zaXRpb24nKSk7XG4gICAgfVxuICB9XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25ndC1zb2JhLWdpem1vLWZhY2VjdWJlJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmd0LXNvYmEtYm94XG4gICAgICBbaXNNYXRlcmlhbEFycmF5XT1cInRydWVcIlxuICAgICAgW3JheWNhc3RdPVwicmF5Y2FzdCQgfCBhc3luY1wiXG4gICAgICAocmVhZHkpPVwib2JqZWN0ID0gJGV2ZW50XCJcbiAgICAgIChjbGljayk9XCJvbkZhY2VDbGljaygkZXZlbnQpXCJcbiAgICAgIChwb2ludGVybW92ZSk9XCJvbkZhY2VQb2ludGVyTW92ZSgkZXZlbnQpXCJcbiAgICAgIChwb2ludGVyb3V0KT1cIm9uRmFjZVBvaW50ZXJPdXQoJGV2ZW50KVwiXG4gICAgPlxuICAgICAgPG5ndC1zb2JhLWdpem1vLWZhY2UtbWF0ZXJpYWxcbiAgICAgICAgKnJlcGVhdD1cImxldCBpbmRleCBvZiA2XCJcbiAgICAgICAgW2hvdmVyXT1cImhvdmVyID09PSBpbmRleFwiXG4gICAgICAgIFtpbmRleF09XCJpbmRleFwiXG4gICAgICAgIFtnZW5lcmljQ29udHJvbGxlcl09XCJnZW5lcmljQ29udHJvbGxlclwiXG4gICAgICA+PC9uZ3Qtc29iYS1naXptby1mYWNlLW1hdGVyaWFsPlxuICAgIDwvbmd0LXNvYmEtYm94PlxuICBgLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAgTkdUX1ZJRVdDVUJFX0dFTkVSSUNfQ09OVFJPTExFUl9QUk9WSURFUixcbiAgICB7XG4gICAgICBwcm92aWRlOiBOZ3RTb2JhRXh0ZW5kZXIsXG4gICAgICB1c2VFeGlzdGluZzogTmd0U29iYUdpem1vRmFjZWN1YmUsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgTmd0U29iYUdpem1vRmFjZWN1YmUgZXh0ZW5kcyBOZ3RTb2JhRXh0ZW5kZXI8VEhSRUUuTWVzaD4ge1xuICBob3ZlcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcmVhZG9ubHkgcmF5Y2FzdCQgPSB0aGlzLmdpem1vSGVscGVyU3RvcmUuc2VsZWN0KCdyYXljYXN0Jyk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChOR1RfVklFV0NVQkVfR0VORVJJQ19XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgcHVibGljIGdlbmVyaWNDb250cm9sbGVyOiBHZW5lcmljQ29udHJvbGxlcixcbiAgICBwcml2YXRlIGdpem1vSGVscGVyU3RvcmU6IE5ndFNvYmFHaXptb0hlbHBlclN0b3JlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBvbkZhY2VQb2ludGVyTW92ZSgkZXZlbnQ6IE5ndEV2ZW50PFBvaW50ZXJFdmVudD4pIHtcbiAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5ob3ZlciA9IE1hdGguZmxvb3IoJGV2ZW50LmZhY2VJbmRleCEgLyAyKTtcbiAgfVxuXG4gIG9uRmFjZVBvaW50ZXJPdXQoJGV2ZW50OiBOZ3RFdmVudDxQb2ludGVyRXZlbnQ+KSB7XG4gICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaG92ZXIgPSBudWxsO1xuICB9XG5cbiAgb25GYWNlQ2xpY2soJGV2ZW50OiBOZ3RFdmVudDxNb3VzZUV2ZW50Pikge1xuICAgIGlmICh0aGlzLmdlbmVyaWNDb250cm9sbGVyLmNsaWNrT3V0cHV0Lm9ic2VydmVkKSB7XG4gICAgICB0aGlzLmdlbmVyaWNDb250cm9sbGVyLmNsaWNrT3V0cHV0LmVtaXQoJGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5naXptb0hlbHBlclN0b3JlLnR3ZWVuQ2FtZXJhKCRldmVudC5mYWNlIS5ub3JtYWwpO1xuICAgIH1cbiAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3Qtc29iYS1naXptby1mYWNlLW1hdGVyaWFsW2hvdmVyXVtpbmRleF0nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuZ3QtbWVzaC1sYW1iZXJ0LW1hdGVyaWFsXG4gICAgICAqbmdJZj1cInBhcmFtZXRlciQgfCBhc3luYyBhcyBwYXJhbWV0ZXJcIlxuICAgICAgW3BhcmFtZXRlcnNdPVwie1xuICAgICAgICBtYXA6IHBhcmFtZXRlci50ZXh0dXJlLFxuICAgICAgICBjb2xvcjogcGFyYW1ldGVyLmNvbG9yLFxuICAgICAgICBvcGFjaXR5OiBwYXJhbWV0ZXIub3BhY2l0eSxcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWVcbiAgICAgIH1cIlxuICAgID48L25ndC1tZXNoLWxhbWJlcnQtbWF0ZXJpYWw+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtOR1RfVklFV0NVQkVfR0VORVJJQ19DT05UUk9MTEVSX1BST1ZJREVSLCBFbmhhbmNlZFJ4U3RhdGVdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RTb2JhR2l6bW9GYWNlTWF0ZXJpYWwge1xuICBASW5wdXQoKSBzZXQgaG92ZXIoaG92ZXI6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGhvdmVyIH0pO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGluZGV4IH0pO1xuICB9XG5cbiAgcmVhZG9ubHkgcGFyYW1ldGVyJCA9IGNvbWJpbmVMYXRlc3QoW1xuICAgIHRoaXMuc3RhdGUuc2VsZWN0KHNlbGVjdFNsaWNlKFsnaG92ZXInLCAnaW5kZXgnLCAndGV4dHVyZSddKSksXG4gICAgdGhpcy5nZW5lcmljQ29udHJvbGxlci5yeFN0YXRlLnNlbGVjdChcbiAgICAgIHNlbGVjdFNsaWNlKFsnaG92ZXJDb2xvcicsICdvcGFjaXR5J10pLFxuICAgICAgc3RhcnRXaXRoKHtcbiAgICAgICAgaG92ZXJDb2xvcjogdGhpcy5nZW5lcmljQ29udHJvbGxlci5yeFN0YXRlLmdldCgnaG92ZXJDb2xvcicpLFxuICAgICAgICBvcGFjaXR5OiB0aGlzLmdlbmVyaWNDb250cm9sbGVyLnJ4U3RhdGUuZ2V0KCdvcGFjaXR5JyksXG4gICAgICB9KVxuICAgICksXG4gICAgdGhpcy5zdG9yZS5zZWxlY3QoJ3JlbmRlcmVyJyksXG4gIF0pLnBpcGUoXG4gICAgbWFwKChbeyB0ZXh0dXJlLCBob3ZlciB9LCB7IGhvdmVyQ29sb3IsIG9wYWNpdHkgfSwgcmVuZGVyZXJdKSA9PiB7XG4gICAgICB0ZXh0dXJlLmFuaXNvdHJvcHkgPSByZW5kZXJlci5jYXBhYmlsaXRpZXMuZ2V0TWF4QW5pc290cm9weSgpIHx8IDE7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0dXJlLFxuICAgICAgICBjb2xvcjogaG92ZXIgPyBob3ZlckNvbG9yIDogJ3doaXRlJyxcbiAgICAgICAgb3BhY2l0eTogb3BhY2l0eSxcbiAgICAgIH07XG4gICAgfSlcbiAgKTtcblxuICByZWFkb25seSAjY2hhbmdlJCA9IGNvbWJpbmVMYXRlc3QoW1xuICAgIHRoaXMuc3RhdGUuc2VsZWN0KCdpbmRleCcpLFxuICAgIHRoaXMuZ2VuZXJpY0NvbnRyb2xsZXIucnhTdGF0ZS5zZWxlY3QoXG4gICAgICBzZWxlY3RTbGljZShbJ2ZvbnQnLCAnY29sb3InLCAndGV4dENvbG9yJywgJ3N0cm9rZUNvbG9yJ10pXG4gICAgKSxcbiAgXSkucGlwZShcbiAgICBtYXAoKFtpbmRleCwgeyBmb250LCBjb2xvciwgdGV4dENvbG9yLCBzdHJva2VDb2xvciB9XSkgPT4gKHtcbiAgICAgIGluZGV4LFxuICAgICAgZm9udCxcbiAgICAgIGNvbG9yLFxuICAgICAgdGV4dENvbG9yLFxuICAgICAgc3Ryb2tlQ29sb3IsXG4gICAgfSkpXG4gICk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChOR1RfVklFV0NVQkVfR0VORVJJQ19XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgcHVibGljIGdlbmVyaWNDb250cm9sbGVyOiBHZW5lcmljQ29udHJvbGxlcixcbiAgICBwcml2YXRlIHN0YXRlOiBFbmhhbmNlZFJ4U3RhdGU8e1xuICAgICAgaG92ZXI6IGJvb2xlYW47XG4gICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgdGV4dHVyZTogVEhSRUUuQ2FudmFzVGV4dHVyZTtcbiAgICB9PixcbiAgICBwcml2YXRlIHN0b3JlOiBOZ3RTdG9yZSxcbiAgICBASW5qZWN0KERPQ1VNRU5UKSBkb2N1bWVudDogRG9jdW1lbnRcbiAgKSB7XG4gICAgdGhpcy5zdGF0ZS5jb25uZWN0KFxuICAgICAgJ3RleHR1cmUnLFxuICAgICAgdGhpcy4jY2hhbmdlJCxcbiAgICAgIChfLCB7IGluZGV4LCBmb250LCBjb2xvciwgdGV4dENvbG9yLCBzdHJva2VDb2xvciB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGZhY2VzID0gdGhpcy5nZW5lcmljQ29udHJvbGxlci5yeFN0YXRlLmdldCgnZmFjZXMnKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IDEyODtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IDEyODtcblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2VDb2xvcjtcbiAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gdGV4dENvbG9yO1xuICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGZhY2VzW2luZGV4XS50b1VwcGVyQ2FzZSgpLCA2NCwgNzYpO1xuXG4gICAgICAgIHJldHVybiBuZXcgVEhSRUUuQ2FudmFzVGV4dHVyZShjYW52YXMpO1xuICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgR2VuZXJpY0NvbnRyb2xsZXIsXG4gICAgTmd0U29iYUdpem1vVmlld2N1YmUsXG4gICAgTmd0U29iYUdpem1vRWRnZWN1YmUsXG4gICAgTmd0U29iYUdpem1vRmFjZWN1YmUsXG4gICAgTmd0U29iYUdpem1vRmFjZU1hdGVyaWFsLFxuICBdLFxuICBleHBvcnRzOiBbTmd0U29iYUdpem1vVmlld2N1YmUsIEdlbmVyaWNDb250cm9sbGVyXSxcbiAgaW1wb3J0czogW1xuICAgIE5ndEdyb3VwTW9kdWxlLFxuICAgIE5ndEFtYmllbnRMaWdodE1vZHVsZSxcbiAgICBOZ3RQb2ludExpZ2h0TW9kdWxlLFxuICAgIE5ndE1lc2hMYW1iZXJ0TWF0ZXJpYWxNb2R1bGUsXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIE5ndFJlcGVhdE1vZHVsZSxcbiAgICBOZ3RNZXNoQmFzaWNNYXRlcmlhbE1vZHVsZSxcbiAgICBOZ3RTb2JhQm94TW9kdWxlLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RTb2JhR2l6bW9WaWV3Y3ViZU1vZHVsZSB7fVxuIl19