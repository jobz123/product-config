var _NgtSobaGizmoAxis_scale, _NgtSobaGizmoAxisHead_changes$;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { EnhancedRxState, NGT_OBJECT_INPUTS_CONTROLLER_PROVIDER, NGT_OBJECT_INPUTS_WATCHED_CONTROLLER, NgtMathPipeModule, NgtObject3dInputsController, NgtSobaExtender, NgtStore, } from '@angular-three/core';
import { NgtGroupModule } from '@angular-three/core/group';
import { NgtAmbientLightModule, NgtPointLightModule, } from '@angular-three/core/lights';
import { NgtMeshBasicMaterialModule, NgtSpriteMaterialModule, } from '@angular-three/core/materials';
import { NgtSpriteModule } from '@angular-three/core/sprites';
import { NgtSobaBoxModule } from '@angular-three/soba/shapes';
import { CommonModule, DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, Component, EventEmitter, Inject, Input, NgModule, Output, } from '@angular/core';
import { selectSlice } from '@rx-angular/state';
import { combineLatest, map } from 'rxjs';
import * as THREE from 'three';
import { NgtSobaGizmoHelperStore } from './gizmo-helper.store';
import * as i0 from "@angular/core";
import * as i1 from "./gizmo-helper.store";
import * as i2 from "@angular/common";
import * as i3 from "@angular-three/core/group";
import * as i4 from "@angular-three/core";
import * as i5 from "@angular-three/core/lights";
import * as i6 from "@angular-three/soba/shapes";
import * as i7 from "@angular-three/core/materials";
import * as i8 from "@angular-three/core/sprites";
export class NgtSobaGizmoViewport extends NgtSobaExtender {
    constructor(objectInputsController, gizmoHelperStore) {
        super();
        this.objectInputsController = objectInputsController;
        this.gizmoHelperStore = gizmoHelperStore;
        this.axisColors = [
            '#ff3653',
            '#0adb50',
            '#2c8fdf',
        ];
        this.labels = ['X', 'Y', 'Z'];
        this.labelColor = '#000';
        this.font = '18px Inter var, Arial, sans-serif';
        this.axisHeadScale = 1;
        this.hideNegativeAxes = false;
        this.hideAxisHeads = false;
        this.disabled = false;
        this.click = new EventEmitter();
        this.gizmo$ = this.gizmoHelperStore.select('gizmo');
        this.raycast$ = this.gizmoHelperStore.select('raycast');
    }
}
NgtSobaGizmoViewport.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewport, deps: [{ token: NGT_OBJECT_INPUTS_WATCHED_CONTROLLER }, { token: i1.NgtSobaGizmoHelperStore }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoViewport.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoViewport, selector: "ngt-soba-gizmo-viewport", inputs: { axisColors: "axisColors", labels: "labels", labelColor: "labelColor", font: "font", axisHeadScale: "axisHeadScale", hideNegativeAxes: "hideNegativeAxes", hideAxisHeads: "hideAxisHeads", disabled: "disabled", axisScale: "axisScale" }, outputs: { click: "click" }, providers: [
        NGT_OBJECT_INPUTS_CONTROLLER_PROVIDER,
        { provide: NgtSobaExtender, useExisting: NgtSobaGizmoViewport },
    ], usesInheritance: true, ngImport: i0, template: `
    <ngt-group
      *ngIf="gizmo$ | async as gizmo"
      (ready)="object = $event; object.scale.set(40, 40, 40)"
      [appendTo]="gizmo"
      [object3dInputsController]="objectInputsController"
    >
      <ngt-soba-gizmo-axis
        [color]="axisColors[0]"
        [rotation]="[0, 0, 0]"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ngt-soba-gizmo-axis
        [color]="axisColors[1]"
        [rotation]="[0, 0, 0.5 | mathConst: 'PI']"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ngt-soba-gizmo-axis
        [color]="axisColors[2]"
        [rotation]="[0, -0.5 | mathConst: 'PI', 0]"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ng-container *ngIf="!hideAxisHeads">
        <ng-container *ngIf="{ raycast: raycast$ | async } as vm">
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[0]"
            [position]="[1, 0, 0]"
            [label]="labels[0]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[1]"
            [position]="[0, 1, 0]"
            [label]="labels[1]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[2]"
            [position]="[0, 0, 1]"
            [label]="labels[2]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>

          <ng-container *ngIf="!hideNegativeAxes">
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[0]"
              [position]="[-1, 0, 0]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[1]"
              [position]="[0, -1, 0]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[2]"
              [position]="[0, 0, -1]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
          </ng-container>
        </ng-container>
      </ng-container>
      <ngt-ambient-light [intensity]="0.5"></ngt-ambient-light>
      <ngt-point-light
        [intensity]="0.5"
        [position]="[10, 10, 10]"
      ></ngt-point-light>
    </ngt-group>
  `, isInline: true, components: [{ type: i0.forwardRef(function () { return NgtSobaGizmoAxis; }), selector: "ngt-soba-gizmo-axis[color][rotation]", inputs: ["color", "rotation", "scale"] }, { type: i0.forwardRef(function () { return NgtSobaGizmoAxisHead; }), selector: "ngt-soba-gizmo-axis-head", inputs: ["arcStyle", "label", "labelColor", "axisHeadScale", "disabled", "font"] }], directives: [{ type: i0.forwardRef(function () { return i2.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i3.NgtGroup; }), selector: "ngt-group", outputs: ["ready"], exportAs: ["ngtGroup"] }, { type: i0.forwardRef(function () { return i4.NgtObject3dController; }), selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera  ", exportAs: ["ngtObject3dController"] }, { type: i0.forwardRef(function () { return i4.NgtObject3dInputsController; }), selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i0.forwardRef(function () { return i5.NgtAmbientLight; }), selector: "ngt-ambient-light", inputs: ["args"], exportAs: ["ngtAmbientLight"] }, { type: i0.forwardRef(function () { return i5.NgtPointLight; }), selector: "ngt-point-light", inputs: ["args"], exportAs: ["ngtPointLight"] }], pipes: { "async": i0.forwardRef(function () { return i2.AsyncPipe; }), "mathConst": i0.forwardRef(function () { return i4.NgtMathConstantPipe; }) }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewport, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-viewport',
                    template: `
    <ngt-group
      *ngIf="gizmo$ | async as gizmo"
      (ready)="object = $event; object.scale.set(40, 40, 40)"
      [appendTo]="gizmo"
      [object3dInputsController]="objectInputsController"
    >
      <ngt-soba-gizmo-axis
        [color]="axisColors[0]"
        [rotation]="[0, 0, 0]"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ngt-soba-gizmo-axis
        [color]="axisColors[1]"
        [rotation]="[0, 0, 0.5 | mathConst: 'PI']"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ngt-soba-gizmo-axis
        [color]="axisColors[2]"
        [rotation]="[0, -0.5 | mathConst: 'PI', 0]"
        [scale]="axisScale"
      ></ngt-soba-gizmo-axis>
      <ng-container *ngIf="!hideAxisHeads">
        <ng-container *ngIf="{ raycast: raycast$ | async } as vm">
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[0]"
            [position]="[1, 0, 0]"
            [label]="labels[0]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[1]"
            [position]="[0, 1, 0]"
            [label]="labels[1]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>
          <ngt-soba-gizmo-axis-head
            [arcStyle]="axisColors[2]"
            [position]="[0, 0, 1]"
            [label]="labels[2]"
            [font]="font"
            [disabled]="disabled"
            [labelColor]="labelColor"
            [raycast]="vm.raycast"
            [axisHeadScale]="axisHeadScale"
          ></ngt-soba-gizmo-axis-head>

          <ng-container *ngIf="!hideNegativeAxes">
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[0]"
              [position]="[-1, 0, 0]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[1]"
              [position]="[0, -1, 0]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
            <ngt-soba-gizmo-axis-head
              [arcStyle]="axisColors[2]"
              [position]="[0, 0, -1]"
              [font]="font"
              [disabled]="disabled"
              [labelColor]="labelColor"
              [raycast]="vm.raycast"
              [axisHeadScale]="axisHeadScale"
            ></ngt-soba-gizmo-axis-head>
          </ng-container>
        </ng-container>
      </ng-container>
      <ngt-ambient-light [intensity]="0.5"></ngt-ambient-light>
      <ngt-point-light
        [intensity]="0.5"
        [position]="[10, 10, 10]"
      ></ngt-point-light>
    </ngt-group>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        NGT_OBJECT_INPUTS_CONTROLLER_PROVIDER,
                        { provide: NgtSobaExtender, useExisting: NgtSobaGizmoViewport },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i4.NgtObject3dInputsController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_INPUTS_WATCHED_CONTROLLER]
                }] }, { type: i1.NgtSobaGizmoHelperStore }]; }, propDecorators: { axisColors: [{
                type: Input
            }], labels: [{
                type: Input
            }], labelColor: [{
                type: Input
            }], font: [{
                type: Input
            }], axisHeadScale: [{
                type: Input
            }], hideNegativeAxes: [{
                type: Input
            }], hideAxisHeads: [{
                type: Input
            }], disabled: [{
                type: Input
            }], axisScale: [{
                type: Input
            }], click: [{
                type: Output
            }] } });
export class NgtSobaGizmoAxis extends NgtSobaExtender {
    constructor() {
        super(...arguments);
        _NgtSobaGizmoAxis_scale.set(this, [0.8, 0.05, 0.05]);
    }
    set scale(v) {
        __classPrivateFieldSet(this, _NgtSobaGizmoAxis_scale, v || __classPrivateFieldGet(this, _NgtSobaGizmoAxis_scale, "f"), "f");
    }
    get scale() {
        return __classPrivateFieldGet(this, _NgtSobaGizmoAxis_scale, "f");
    }
}
_NgtSobaGizmoAxis_scale = new WeakMap();
NgtSobaGizmoAxis.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoAxis, deps: null, target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoAxis.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoAxis, selector: "ngt-soba-gizmo-axis[color][rotation]", inputs: { color: "color", rotation: "rotation", scale: "scale" }, providers: [{ provide: NgtSobaExtender, useExisting: NgtSobaGizmoAxis }], usesInheritance: true, ngImport: i0, template: `
    <ngt-group (ready)="object = $event" [rotation]="rotation">
      <ngt-soba-box [args]="scale" [position]="[0.4, 0, 0]">
        <ngt-mesh-basic-material
          [parameters]="{ color, toneMapped: false }"
        ></ngt-mesh-basic-material>
      </ngt-soba-box>
    </ngt-group>
  `, isInline: true, components: [{ type: i6.NgtSobaBox, selector: "ngt-soba-box", inputs: ["args"] }], directives: [{ type: i3.NgtGroup, selector: "ngt-group", outputs: ["ready"], exportAs: ["ngtGroup"] }, { type: i4.NgtObject3dController, selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera  ", exportAs: ["ngtObject3dController"] }, { type: i4.NgtObject3dInputsController, selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i4.NgtContentMaterialController, selector: "    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-text,,    ngt-points  ", inputs: ["material", "isMaterialArray", "contentMaterialController"], exportAs: ["ngtContentMaterialController"] }, { type: i7.NgtMeshBasicMaterial, selector: "ngt-mesh-basic-material", exportAs: ["ngtMeshBasicMaterial"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoAxis, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-axis[color][rotation]',
                    template: `
    <ngt-group (ready)="object = $event" [rotation]="rotation">
      <ngt-soba-box [args]="scale" [position]="[0.4, 0, 0]">
        <ngt-mesh-basic-material
          [parameters]="{ color, toneMapped: false }"
        ></ngt-mesh-basic-material>
      </ngt-soba-box>
    </ngt-group>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [{ provide: NgtSobaExtender, useExisting: NgtSobaGizmoAxis }],
                }]
        }], propDecorators: { color: [{
                type: Input
            }], rotation: [{
                type: Input
            }], scale: [{
                type: Input
            }] } });
export class NgtSobaGizmoAxisHead extends NgtSobaExtender {
    constructor(objectInputsController, document, gizmoViewport, gizmoHelperStore, store, state) {
        super();
        this.objectInputsController = objectInputsController;
        this.gizmoViewport = gizmoViewport;
        this.gizmoHelperStore = gizmoHelperStore;
        this.store = store;
        this.state = state;
        _NgtSobaGizmoAxisHead_changes$.set(this, this.state.select(selectSlice(['arcStyle', 'label', 'labelColor', 'font'])));
        this.vm$ = combineLatest([
            this.state.select(selectSlice(['active', 'label', 'axisHeadScale', 'texture'])),
            this.store.select('renderer'),
        ]).pipe(map(([{ texture, label, active, axisHeadScale }, renderer]) => {
            texture.anisotropy = renderer.capabilities.getMaxAnisotropy() || 1;
            return {
                texture,
                scale: (label ? 1 : 0.75) * (active ? 1.2 : 1) * axisHeadScale,
                opacity: label ? 1 : 0.75,
            };
        }));
        this.state.set({
            label: '',
            active: false,
            disabled: false,
        });
        this.state.connect('texture', __classPrivateFieldGet(this, _NgtSobaGizmoAxisHead_changes$, "f"), (_, { label, labelColor, arcStyle, font }) => {
            const canvas = document.createElement('canvas');
            canvas.width = 64;
            canvas.height = 64;
            const context = canvas.getContext('2d');
            context.beginPath();
            context.arc(32, 32, 16, 0, 2 * Math.PI);
            context.closePath();
            context.fillStyle = arcStyle;
            context.fill();
            if (label) {
                context.font = font;
                context.textAlign = 'center';
                context.fillStyle = labelColor;
                context.fillText(label, 32, 41);
            }
            return new THREE.CanvasTexture(canvas);
        });
    }
    set arcStyle(arcStyle) {
        this.state.set({ arcStyle });
    }
    set label(label) {
        this.state.set({ label });
    }
    set labelColor(labelColor) {
        this.state.set({ labelColor });
    }
    set axisHeadScale(axisHeadScale) {
        this.state.set({ axisHeadScale });
    }
    set disabled(disabled) {
        this.state.set({ disabled: disabled || false });
    }
    set font(font) {
        this.state.set({ font });
    }
    onAxisHeadPointerOver($event) {
        if (!this.state.get('disabled')) {
            $event.stopPropagation();
            this.state.set({ active: true });
        }
    }
    onAxisHeadPointerOut($event) {
        if (!this.state.get('disabled')) {
            if (this.gizmoViewport.click.observed) {
                this.gizmoViewport.click.emit($event);
            }
            else {
                $event.stopPropagation();
                this.state.set({ active: false });
            }
        }
    }
    onAxisHeadPointerDown($event) {
        if (!this.state.get('disabled')) {
            $event.stopPropagation();
            this.gizmoHelperStore.tweenCamera($event.object.position);
        }
    }
}
_NgtSobaGizmoAxisHead_changes$ = new WeakMap();
NgtSobaGizmoAxisHead.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoAxisHead, deps: [{ token: NGT_OBJECT_INPUTS_WATCHED_CONTROLLER }, { token: DOCUMENT }, { token: NgtSobaGizmoViewport }, { token: i1.NgtSobaGizmoHelperStore }, { token: i4.NgtStore }, { token: i4.EnhancedRxState }], target: i0.ɵɵFactoryTarget.Component });
NgtSobaGizmoAxisHead.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.1", type: NgtSobaGizmoAxisHead, selector: "ngt-soba-gizmo-axis-head", inputs: { arcStyle: "arcStyle", label: "label", labelColor: "labelColor", axisHeadScale: "axisHeadScale", disabled: "disabled", font: "font" }, providers: [
        NGT_OBJECT_INPUTS_CONTROLLER_PROVIDER,
        EnhancedRxState,
        { provide: NgtSobaExtender, useExisting: NgtSobaGizmoAxisHead },
    ], usesInheritance: true, ngImport: i0, template: `
    <ng-container *ngIf="vm$ | async as vm">
      <ngt-sprite-material
        #spriteMaterial="ngtSpriteMaterial"
        [parameters]="{
          map: vm.texture,
          opacity: vm.opacity,
          toneMapped: false,
          alphaTest: 0.3
        }"
      ></ngt-sprite-material>
      <ngt-sprite
        (ready)="object = $event"
        (pointerover)="onAxisHeadPointerOver($event)"
        (pointerout)="onAxisHeadPointerOut($event)"
        (pointerdown)="onAxisHeadPointerDown($event)"
        [scale]="vm.scale"
        [material]="spriteMaterial.material"
        [object3dInputsController]="objectInputsController"
      ></ngt-sprite>
    </ng-container>
  `, isInline: true, directives: [{ type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.NgtSpriteMaterial, selector: "ngt-sprite-material", exportAs: ["ngtSpriteMaterial"] }, { type: i4.NgtObject3dController, selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera  ", exportAs: ["ngtObject3dController"] }, { type: i4.NgtObject3dInputsController, selector: "    ngt-primitive,    ngt-bone,    ngt-group,    ngt-lod,    ngt-points,    ngt-mesh,    ngt-instanced-mesh,    ngt-skinned-mesh,    ngt-audio,    ngt-positional-audio,    ngt-line,    ngt-line-loop,    ngt-line-segments,    ngt-light-probe,    ngt-ambient-light,    ngt-ambient-light-probe,    ngt-hemisphere-light,    ngt-hemisphere-light-probe,    ngt-directional-light,    ngt-point-light,    ngt-spot-light,    ngt-rect-area-light,    ngt-arrow-helper,    ngt-axes-helper,    ngt-box3-helper,    ngt-grid-helper,    ngt-plane-helper,    ngt-polar-grid-helper,    ngt-sprite,    ngt-camera,    ngt-perspective-camera,    ngt-orthographic-camera,    ngt-array-camera,    ngt-stereo-camera,    ngt-cube-camera,    ngt-soba-plane,    ngt-soba-box,    ngt-soba-cylinder,    ngt-soba-cone,    ngt-soba-circle,    ngt-soba-sphere,    ngt-soba-tube,    ngt-soba-torus,    ngt-soba-tetrahedron,    ngt-soba-ring,    ngt-soba-polyhedron,    ngt-soba-octahedron,    ngt-soba-dodecahedron,    ngt-soba-icosahedron,    ngt-soba-extrude,    ngt-soba-lathe,    ngt-soba-torus-knot,    ngt-soba-billboard,    ngt-soba-detailed,    ngt-soba-line,    ngt-soba-quadratic-bezier-line,    ngt-soba-cubic-bezier-line,    ngt-soba-orthographic-camera,    ngt-soba-gizmo-helper,    ngt-soba-gizmo-viewport,    ngt-soba-gizmo-axis-head,    ngt-soba-text  ", inputs: ["name", "position", "rotation", "quaternion", "scale", "color", "userData", "castShadow", "receiveShadow", "visible", "matrixAutoUpdate", "dispose", "raycast", "appendMode", "appendTo", "object3dInputsController"], outputs: ["click", "contextmenu", "dblclick", "pointerup", "pointerdown", "pointerover", "pointerout", "pointerenter", "pointerleave", "pointermove", "pointermissed", "pointercancel", "wheel"], exportAs: ["ngtObject3dInputsController"] }, { type: i8.NgtSprite, selector: "ngt-sprite", exportAs: ["ngtSprite"] }], pipes: { "async": i2.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoAxisHead, decorators: [{
            type: Component,
            args: [{
                    selector: 'ngt-soba-gizmo-axis-head',
                    template: `
    <ng-container *ngIf="vm$ | async as vm">
      <ngt-sprite-material
        #spriteMaterial="ngtSpriteMaterial"
        [parameters]="{
          map: vm.texture,
          opacity: vm.opacity,
          toneMapped: false,
          alphaTest: 0.3
        }"
      ></ngt-sprite-material>
      <ngt-sprite
        (ready)="object = $event"
        (pointerover)="onAxisHeadPointerOver($event)"
        (pointerout)="onAxisHeadPointerOut($event)"
        (pointerdown)="onAxisHeadPointerDown($event)"
        [scale]="vm.scale"
        [material]="spriteMaterial.material"
        [object3dInputsController]="objectInputsController"
      ></ngt-sprite>
    </ng-container>
  `,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        NGT_OBJECT_INPUTS_CONTROLLER_PROVIDER,
                        EnhancedRxState,
                        { provide: NgtSobaExtender, useExisting: NgtSobaGizmoAxisHead },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i4.NgtObject3dInputsController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_INPUTS_WATCHED_CONTROLLER]
                }] }, { type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }, { type: NgtSobaGizmoViewport }, { type: i1.NgtSobaGizmoHelperStore }, { type: i4.NgtStore }, { type: i4.EnhancedRxState }]; }, propDecorators: { arcStyle: [{
                type: Input
            }], label: [{
                type: Input
            }], labelColor: [{
                type: Input
            }], axisHeadScale: [{
                type: Input
            }], disabled: [{
                type: Input
            }], font: [{
                type: Input
            }] } });
export class NgtSobaGizmoViewportModule {
}
NgtSobaGizmoViewportModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewportModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
NgtSobaGizmoViewportModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewportModule, declarations: [NgtSobaGizmoViewport, NgtSobaGizmoAxis, NgtSobaGizmoAxisHead], imports: [CommonModule,
        NgtGroupModule,
        NgtSobaBoxModule,
        NgtMeshBasicMaterialModule,
        NgtSpriteModule,
        NgtSpriteMaterialModule,
        NgtMathPipeModule,
        NgtAmbientLightModule,
        NgtPointLightModule], exports: [NgtSobaGizmoViewport] });
NgtSobaGizmoViewportModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewportModule, imports: [[
            CommonModule,
            NgtGroupModule,
            NgtSobaBoxModule,
            NgtMeshBasicMaterialModule,
            NgtSpriteModule,
            NgtSpriteMaterialModule,
            NgtMathPipeModule,
            NgtAmbientLightModule,
            NgtPointLightModule,
        ]] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.1", ngImport: i0, type: NgtSobaGizmoViewportModule, decorators: [{
            type: NgModule,
            args: [{
                    declarations: [NgtSobaGizmoViewport, NgtSobaGizmoAxis, NgtSobaGizmoAxisHead],
                    exports: [NgtSobaGizmoViewport],
                    imports: [
                        CommonModule,
                        NgtGroupModule,
                        NgtSobaBoxModule,
                        NgtMeshBasicMaterialModule,
                        NgtSpriteModule,
                        NgtSpriteMaterialModule,
                        NgtMathPipeModule,
                        NgtAmbientLightModule,
                        NgtPointLightModule,
                    ],
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l6bW8tdmlld3BvcnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvc29iYS9hYnN0cmFjdGlvbnMvc3JjL2dpem1vLWhlbHBlci9naXptby12aWV3cG9ydC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLEVBQ0wsZUFBZSxFQUNmLHFDQUFxQyxFQUNyQyxvQ0FBb0MsRUFFcEMsaUJBQWlCLEVBQ2pCLDJCQUEyQixFQUMzQixlQUFlLEVBQ2YsUUFBUSxHQUNULE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzNELE9BQU8sRUFDTCxxQkFBcUIsRUFDckIsbUJBQW1CLEdBQ3BCLE1BQU0sNEJBQTRCLENBQUM7QUFDcEMsT0FBTyxFQUNMLDBCQUEwQixFQUMxQix1QkFBdUIsR0FDeEIsTUFBTSwrQkFBK0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDOUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN6RCxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxZQUFZLEVBQ1osTUFBTSxFQUNOLEtBQUssRUFDTCxRQUFRLEVBQ1IsTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLEdBQUcsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMxQyxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7Ozs7OztBQXVHL0QsTUFBTSxPQUFPLG9CQUFxQixTQUFRLGVBQTRCO0lBb0JwRSxZQUVTLHNCQUFtRCxFQUNsRCxnQkFBeUM7UUFFakQsS0FBSyxFQUFFLENBQUM7UUFIRCwyQkFBc0IsR0FBdEIsc0JBQXNCLENBQTZCO1FBQ2xELHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBeUI7UUF0QjFDLGVBQVUsR0FBNkI7WUFDOUMsU0FBUztZQUNULFNBQVM7WUFDVCxTQUFTO1NBQ1YsQ0FBQztRQUNPLFdBQU0sR0FBNkIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELGVBQVUsR0FBRyxNQUFNLENBQUM7UUFDcEIsU0FBSSxHQUFHLG1DQUFtQyxDQUFDO1FBQzNDLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLHFCQUFnQixHQUFHLEtBQUssQ0FBQztRQUN6QixrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUN0QixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBR2hCLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBMEIsQ0FBQztRQUVwRCxXQUFNLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQyxhQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQVE1RCxDQUFDOztpSEExQlUsb0JBQW9CLGtCQXFCckIsb0NBQW9DO3FHQXJCbkMsb0JBQW9CLG1VQUxwQjtRQUNULHFDQUFxQztRQUNyQyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLG9CQUFvQixFQUFFO0tBQ2hFLGlEQWpHUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0E0RlQsMEVBa0RVLGdCQUFnQiw2SUE4Q2hCLG9CQUFvQjsyRkF6RnBCLG9CQUFvQjtrQkFyR2hDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHlCQUF5QjtvQkFDbkMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTRGVDtvQkFDRCxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtvQkFDL0MsU0FBUyxFQUFFO3dCQUNULHFDQUFxQzt3QkFDckMsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLFdBQVcsc0JBQXNCLEVBQUU7cUJBQ2hFO2lCQUNGOzswQkFzQkksTUFBTTsyQkFBQyxvQ0FBb0M7a0ZBcEJyQyxVQUFVO3NCQUFsQixLQUFLO2dCQUtHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFFSSxLQUFLO3NCQUFkLE1BQU07O0FBNEJULE1BQU0sT0FBTyxnQkFBaUIsU0FBUSxlQUE0QjtJQWRsRTs7UUEwQkUsa0NBQW1DLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQztLQUN0RDtJQVRDLElBQWEsS0FBSyxDQUFDLENBQXVDO1FBQ3hELHVCQUFBLElBQUksMkJBQVUsQ0FBQyxJQUFJLHVCQUFBLElBQUksK0JBQU8sTUFBQSxDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLHVCQUFBLElBQUksK0JBQU8sQ0FBQztJQUNyQixDQUFDOzs7NkdBVlUsZ0JBQWdCO2lHQUFoQixnQkFBZ0IsaUlBRmhCLENBQUMsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLGlEQVY5RDs7Ozs7Ozs7R0FRVDsyRkFJVSxnQkFBZ0I7a0JBZDVCLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHNDQUFzQztvQkFDaEQsUUFBUSxFQUFFOzs7Ozs7OztHQVFUO29CQUNELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO29CQUMvQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsV0FBVyxrQkFBa0IsRUFBRSxDQUFDO2lCQUN6RTs4QkFFVSxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFFTyxLQUFLO3NCQUFqQixLQUFLOztBQTBDUixNQUFNLE9BQU8sb0JBQXFCLFNBQVEsZUFBNkI7SUE2Q3JFLFlBRVMsc0JBQW1ELEVBQ3hDLFFBQWtCLEVBQzVCLGFBQW1DLEVBQ25DLGdCQUF5QyxFQUN6QyxLQUFlLEVBQ2YsS0FTTjtRQUVGLEtBQUssRUFBRSxDQUFDO1FBaEJELDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBNkI7UUFFbEQsa0JBQWEsR0FBYixhQUFhLENBQXNCO1FBQ25DLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBeUI7UUFDekMsVUFBSyxHQUFMLEtBQUssQ0FBVTtRQUNmLFVBQUssR0FBTCxLQUFLLENBU1g7UUFwQ0oseUNBQXFCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUNwQyxXQUFXLENBQUMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUN6RCxFQUFDO1FBRU8sUUFBRyxHQUFHLGFBQWEsQ0FBQztZQUMzQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FDZixXQUFXLENBQUMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUM3RDtZQUNELElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztTQUM5QixDQUFDLENBQUMsSUFBSSxDQUNMLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsRUFBRSxRQUFRLENBQUMsRUFBRSxFQUFFO1lBQzVELE9BQU8sQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNuRSxPQUFPO2dCQUNMLE9BQU87Z0JBQ1AsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWE7Z0JBQzlELE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTthQUMxQixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQXFCQSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztZQUNiLEtBQUssRUFBRSxFQUFFO1lBQ1QsTUFBTSxFQUFFLEtBQUs7WUFDYixRQUFRLEVBQUUsS0FBSztTQUNoQixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FDaEIsU0FBUyxFQUNULHVCQUFBLElBQUksc0NBQVUsRUFDZCxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUU7WUFDM0MsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztZQUNsQixNQUFNLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUVuQixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFDO1lBQ3pDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3hDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNwQixPQUFPLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztZQUM3QixPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFFZixJQUFJLEtBQUssRUFBRTtnQkFDVCxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDcEIsT0FBTyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7Z0JBQzdCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO2dCQUMvQixPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDakM7WUFFRCxPQUFPLElBQUksS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQ0YsQ0FBQztJQUNKLENBQUM7SUE5RkQsSUFBYSxRQUFRLENBQUMsUUFBZ0I7UUFDcEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFhLEtBQUssQ0FBQyxLQUFhO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBYSxVQUFVLENBQUMsVUFBa0I7UUFDeEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFhLGFBQWEsQ0FBQyxhQUFxQjtRQUM5QyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQWEsUUFBUSxDQUFDLFFBQWlCO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRCxJQUFhLElBQUksQ0FBQyxJQUFZO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBMEVELHFCQUFxQixDQUFDLE1BQThCO1FBQ2xELElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUMvQixNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztTQUNsQztJQUNILENBQUM7SUFFRCxvQkFBb0IsQ0FBQyxNQUE4QjtRQUNqRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDL0IsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7Z0JBQ3JDLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUN2QztpQkFBTTtnQkFDTCxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7YUFDbkM7U0FDRjtJQUNILENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxNQUE4QjtRQUNsRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDL0IsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUMzRDtJQUNILENBQUM7OztpSEF4SFUsb0JBQW9CLGtCQThDckIsb0NBQW9DLGFBRXBDLFFBQVEsYUFDTyxvQkFBb0I7cUdBakRsQyxvQkFBb0IsbU1BTnBCO1FBQ1QscUNBQXFDO1FBQ3JDLGVBQWU7UUFDZixFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLG9CQUFvQixFQUFFO0tBQ2hFLGlEQTNCUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBcUJUOzJGQVFVLG9CQUFvQjtrQkEvQmhDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLDBCQUEwQjtvQkFDcEMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQlQ7b0JBQ0QsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07b0JBQy9DLFNBQVMsRUFBRTt3QkFDVCxxQ0FBcUM7d0JBQ3JDLGVBQWU7d0JBQ2YsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLFdBQVcsc0JBQXNCLEVBQUU7cUJBQ2hFO2lCQUNGOzswQkErQ0ksTUFBTTsyQkFBQyxvQ0FBb0M7OEJBRWhCLFFBQVE7MEJBQW5DLE1BQU07MkJBQUMsUUFBUTs4QkFDTyxvQkFBb0IscUhBaERoQyxRQUFRO3NCQUFwQixLQUFLO2dCQUlPLEtBQUs7c0JBQWpCLEtBQUs7Z0JBSU8sVUFBVTtzQkFBdEIsS0FBSztnQkFJTyxhQUFhO3NCQUF6QixLQUFLO2dCQUlPLFFBQVE7c0JBQXBCLEtBQUs7Z0JBSU8sSUFBSTtzQkFBaEIsS0FBSzs7QUFxSFIsTUFBTSxPQUFPLDBCQUEwQjs7dUhBQTFCLDBCQUEwQjt3SEFBMUIsMEJBQTBCLGlCQW5PMUIsb0JBQW9CLEVBMkNwQixnQkFBZ0IsRUE4Q2hCLG9CQUFvQixhQStIN0IsWUFBWTtRQUNaLGNBQWM7UUFDZCxnQkFBZ0I7UUFDaEIsMEJBQTBCO1FBQzFCLGVBQWU7UUFDZix1QkFBdUI7UUFDdkIsaUJBQWlCO1FBQ2pCLHFCQUFxQjtRQUNyQixtQkFBbUIsYUFoT1Ysb0JBQW9CO3dIQW1PcEIsMEJBQTBCLFlBWjVCO1lBQ1AsWUFBWTtZQUNaLGNBQWM7WUFDZCxnQkFBZ0I7WUFDaEIsMEJBQTBCO1lBQzFCLGVBQWU7WUFDZix1QkFBdUI7WUFDdkIsaUJBQWlCO1lBQ2pCLHFCQUFxQjtZQUNyQixtQkFBbUI7U0FDcEI7MkZBRVUsMEJBQTBCO2tCQWZ0QyxRQUFRO21CQUFDO29CQUNSLFlBQVksRUFBRSxDQUFDLG9CQUFvQixFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixDQUFDO29CQUM1RSxPQUFPLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQztvQkFDL0IsT0FBTyxFQUFFO3dCQUNQLFlBQVk7d0JBQ1osY0FBYzt3QkFDZCxnQkFBZ0I7d0JBQ2hCLDBCQUEwQjt3QkFDMUIsZUFBZTt3QkFDZix1QkFBdUI7d0JBQ3ZCLGlCQUFpQjt3QkFDakIscUJBQXFCO3dCQUNyQixtQkFBbUI7cUJBQ3BCO2lCQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW5oYW5jZWRSeFN0YXRlLFxuICBOR1RfT0JKRUNUX0lOUFVUU19DT05UUk9MTEVSX1BST1ZJREVSLFxuICBOR1RfT0JKRUNUX0lOUFVUU19XQVRDSEVEX0NPTlRST0xMRVIsXG4gIE5ndEV2ZW50LFxuICBOZ3RNYXRoUGlwZU1vZHVsZSxcbiAgTmd0T2JqZWN0M2RJbnB1dHNDb250cm9sbGVyLFxuICBOZ3RTb2JhRXh0ZW5kZXIsXG4gIE5ndFN0b3JlLFxufSBmcm9tICdAYW5ndWxhci10aHJlZS9jb3JlJztcbmltcG9ydCB7IE5ndEdyb3VwTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvY29yZS9ncm91cCc7XG5pbXBvcnQge1xuICBOZ3RBbWJpZW50TGlnaHRNb2R1bGUsXG4gIE5ndFBvaW50TGlnaHRNb2R1bGUsXG59IGZyb20gJ0Bhbmd1bGFyLXRocmVlL2NvcmUvbGlnaHRzJztcbmltcG9ydCB7XG4gIE5ndE1lc2hCYXNpY01hdGVyaWFsTW9kdWxlLFxuICBOZ3RTcHJpdGVNYXRlcmlhbE1vZHVsZSxcbn0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvY29yZS9tYXRlcmlhbHMnO1xuaW1wb3J0IHsgTmd0U3ByaXRlTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXItdGhyZWUvY29yZS9zcHJpdGVzJztcbmltcG9ydCB7IE5ndFNvYmFCb3hNb2R1bGUgfSBmcm9tICdAYW5ndWxhci10aHJlZS9zb2JhL3NoYXBlcyc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUsIERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgTmdNb2R1bGUsXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBzZWxlY3RTbGljZSB9IGZyb20gJ0ByeC1hbmd1bGFyL3N0YXRlJztcbmltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIG1hcCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgTmd0U29iYUdpem1vSGVscGVyU3RvcmUgfSBmcm9tICcuL2dpem1vLWhlbHBlci5zdG9yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25ndC1zb2JhLWdpem1vLXZpZXdwb3J0JyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmd0LWdyb3VwXG4gICAgICAqbmdJZj1cImdpem1vJCB8IGFzeW5jIGFzIGdpem1vXCJcbiAgICAgIChyZWFkeSk9XCJvYmplY3QgPSAkZXZlbnQ7IG9iamVjdC5zY2FsZS5zZXQoNDAsIDQwLCA0MClcIlxuICAgICAgW2FwcGVuZFRvXT1cImdpem1vXCJcbiAgICAgIFtvYmplY3QzZElucHV0c0NvbnRyb2xsZXJdPVwib2JqZWN0SW5wdXRzQ29udHJvbGxlclwiXG4gICAgPlxuICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXNcbiAgICAgICAgW2NvbG9yXT1cImF4aXNDb2xvcnNbMF1cIlxuICAgICAgICBbcm90YXRpb25dPVwiWzAsIDAsIDBdXCJcbiAgICAgICAgW3NjYWxlXT1cImF4aXNTY2FsZVwiXG4gICAgICA+PC9uZ3Qtc29iYS1naXptby1heGlzPlxuICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXNcbiAgICAgICAgW2NvbG9yXT1cImF4aXNDb2xvcnNbMV1cIlxuICAgICAgICBbcm90YXRpb25dPVwiWzAsIDAsIDAuNSB8IG1hdGhDb25zdDogJ1BJJ11cIlxuICAgICAgICBbc2NhbGVdPVwiYXhpc1NjYWxlXCJcbiAgICAgID48L25ndC1zb2JhLWdpem1vLWF4aXM+XG4gICAgICA8bmd0LXNvYmEtZ2l6bW8tYXhpc1xuICAgICAgICBbY29sb3JdPVwiYXhpc0NvbG9yc1syXVwiXG4gICAgICAgIFtyb3RhdGlvbl09XCJbMCwgLTAuNSB8IG1hdGhDb25zdDogJ1BJJywgMF1cIlxuICAgICAgICBbc2NhbGVdPVwiYXhpc1NjYWxlXCJcbiAgICAgID48L25ndC1zb2JhLWdpem1vLWF4aXM+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWhpZGVBeGlzSGVhZHNcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInsgcmF5Y2FzdDogcmF5Y2FzdCQgfCBhc3luYyB9IGFzIHZtXCI+XG4gICAgICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXMtaGVhZFxuICAgICAgICAgICAgW2FyY1N0eWxlXT1cImF4aXNDb2xvcnNbMF1cIlxuICAgICAgICAgICAgW3Bvc2l0aW9uXT1cIlsxLCAwLCAwXVwiXG4gICAgICAgICAgICBbbGFiZWxdPVwibGFiZWxzWzBdXCJcbiAgICAgICAgICAgIFtmb250XT1cImZvbnRcIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtsYWJlbENvbG9yXT1cImxhYmVsQ29sb3JcIlxuICAgICAgICAgICAgW3JheWNhc3RdPVwidm0ucmF5Y2FzdFwiXG4gICAgICAgICAgICBbYXhpc0hlYWRTY2FsZV09XCJheGlzSGVhZFNjYWxlXCJcbiAgICAgICAgICA+PC9uZ3Qtc29iYS1naXptby1heGlzLWhlYWQ+XG4gICAgICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXMtaGVhZFxuICAgICAgICAgICAgW2FyY1N0eWxlXT1cImF4aXNDb2xvcnNbMV1cIlxuICAgICAgICAgICAgW3Bvc2l0aW9uXT1cIlswLCAxLCAwXVwiXG4gICAgICAgICAgICBbbGFiZWxdPVwibGFiZWxzWzFdXCJcbiAgICAgICAgICAgIFtmb250XT1cImZvbnRcIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtsYWJlbENvbG9yXT1cImxhYmVsQ29sb3JcIlxuICAgICAgICAgICAgW3JheWNhc3RdPVwidm0ucmF5Y2FzdFwiXG4gICAgICAgICAgICBbYXhpc0hlYWRTY2FsZV09XCJheGlzSGVhZFNjYWxlXCJcbiAgICAgICAgICA+PC9uZ3Qtc29iYS1naXptby1heGlzLWhlYWQ+XG4gICAgICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXMtaGVhZFxuICAgICAgICAgICAgW2FyY1N0eWxlXT1cImF4aXNDb2xvcnNbMl1cIlxuICAgICAgICAgICAgW3Bvc2l0aW9uXT1cIlswLCAwLCAxXVwiXG4gICAgICAgICAgICBbbGFiZWxdPVwibGFiZWxzWzJdXCJcbiAgICAgICAgICAgIFtmb250XT1cImZvbnRcIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtsYWJlbENvbG9yXT1cImxhYmVsQ29sb3JcIlxuICAgICAgICAgICAgW3JheWNhc3RdPVwidm0ucmF5Y2FzdFwiXG4gICAgICAgICAgICBbYXhpc0hlYWRTY2FsZV09XCJheGlzSGVhZFNjYWxlXCJcbiAgICAgICAgICA+PC9uZ3Qtc29iYS1naXptby1heGlzLWhlYWQ+XG5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWhpZGVOZWdhdGl2ZUF4ZXNcIj5cbiAgICAgICAgICAgIDxuZ3Qtc29iYS1naXptby1heGlzLWhlYWRcbiAgICAgICAgICAgICAgW2FyY1N0eWxlXT1cImF4aXNDb2xvcnNbMF1cIlxuICAgICAgICAgICAgICBbcG9zaXRpb25dPVwiWy0xLCAwLCAwXVwiXG4gICAgICAgICAgICAgIFtmb250XT1cImZvbnRcIlxuICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICBbbGFiZWxDb2xvcl09XCJsYWJlbENvbG9yXCJcbiAgICAgICAgICAgICAgW3JheWNhc3RdPVwidm0ucmF5Y2FzdFwiXG4gICAgICAgICAgICAgIFtheGlzSGVhZFNjYWxlXT1cImF4aXNIZWFkU2NhbGVcIlxuICAgICAgICAgICAgPjwvbmd0LXNvYmEtZ2l6bW8tYXhpcy1oZWFkPlxuICAgICAgICAgICAgPG5ndC1zb2JhLWdpem1vLWF4aXMtaGVhZFxuICAgICAgICAgICAgICBbYXJjU3R5bGVdPVwiYXhpc0NvbG9yc1sxXVwiXG4gICAgICAgICAgICAgIFtwb3NpdGlvbl09XCJbMCwgLTEsIDBdXCJcbiAgICAgICAgICAgICAgW2ZvbnRdPVwiZm9udFwiXG4gICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICAgIFtsYWJlbENvbG9yXT1cImxhYmVsQ29sb3JcIlxuICAgICAgICAgICAgICBbcmF5Y2FzdF09XCJ2bS5yYXljYXN0XCJcbiAgICAgICAgICAgICAgW2F4aXNIZWFkU2NhbGVdPVwiYXhpc0hlYWRTY2FsZVwiXG4gICAgICAgICAgICA+PC9uZ3Qtc29iYS1naXptby1heGlzLWhlYWQ+XG4gICAgICAgICAgICA8bmd0LXNvYmEtZ2l6bW8tYXhpcy1oZWFkXG4gICAgICAgICAgICAgIFthcmNTdHlsZV09XCJheGlzQ29sb3JzWzJdXCJcbiAgICAgICAgICAgICAgW3Bvc2l0aW9uXT1cIlswLCAwLCAtMV1cIlxuICAgICAgICAgICAgICBbZm9udF09XCJmb250XCJcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICAgW2xhYmVsQ29sb3JdPVwibGFiZWxDb2xvclwiXG4gICAgICAgICAgICAgIFtyYXljYXN0XT1cInZtLnJheWNhc3RcIlxuICAgICAgICAgICAgICBbYXhpc0hlYWRTY2FsZV09XCJheGlzSGVhZFNjYWxlXCJcbiAgICAgICAgICAgID48L25ndC1zb2JhLWdpem1vLWF4aXMtaGVhZD5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDxuZ3QtYW1iaWVudC1saWdodCBbaW50ZW5zaXR5XT1cIjAuNVwiPjwvbmd0LWFtYmllbnQtbGlnaHQ+XG4gICAgICA8bmd0LXBvaW50LWxpZ2h0XG4gICAgICAgIFtpbnRlbnNpdHldPVwiMC41XCJcbiAgICAgICAgW3Bvc2l0aW9uXT1cIlsxMCwgMTAsIDEwXVwiXG4gICAgICA+PC9uZ3QtcG9pbnQtbGlnaHQ+XG4gICAgPC9uZ3QtZ3JvdXA+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICBOR1RfT0JKRUNUX0lOUFVUU19DT05UUk9MTEVSX1BST1ZJREVSLFxuICAgIHsgcHJvdmlkZTogTmd0U29iYUV4dGVuZGVyLCB1c2VFeGlzdGluZzogTmd0U29iYUdpem1vVmlld3BvcnQgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgTmd0U29iYUdpem1vVmlld3BvcnQgZXh0ZW5kcyBOZ3RTb2JhRXh0ZW5kZXI8VEhSRUUuR3JvdXA+IHtcbiAgQElucHV0KCkgYXhpc0NvbG9yczogW3N0cmluZywgc3RyaW5nLCBzdHJpbmddID0gW1xuICAgICcjZmYzNjUzJyxcbiAgICAnIzBhZGI1MCcsXG4gICAgJyMyYzhmZGYnLFxuICBdO1xuICBASW5wdXQoKSBsYWJlbHM6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSA9IFsnWCcsICdZJywgJ1onXTtcbiAgQElucHV0KCkgbGFiZWxDb2xvciA9ICcjMDAwJztcbiAgQElucHV0KCkgZm9udCA9ICcxOHB4IEludGVyIHZhciwgQXJpYWwsIHNhbnMtc2VyaWYnO1xuICBASW5wdXQoKSBheGlzSGVhZFNjYWxlID0gMTtcbiAgQElucHV0KCkgaGlkZU5lZ2F0aXZlQXhlcyA9IGZhbHNlO1xuICBASW5wdXQoKSBoaWRlQXhpc0hlYWRzID0gZmFsc2U7XG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIGF4aXNTY2FsZT86IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuICBAT3V0cHV0KCkgY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPE5ndEV2ZW50PFBvaW50ZXJFdmVudD4+KCk7XG5cbiAgcmVhZG9ubHkgZ2l6bW8kID0gdGhpcy5naXptb0hlbHBlclN0b3JlLnNlbGVjdCgnZ2l6bW8nKTtcbiAgcmVhZG9ubHkgcmF5Y2FzdCQgPSB0aGlzLmdpem1vSGVscGVyU3RvcmUuc2VsZWN0KCdyYXljYXN0Jyk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChOR1RfT0JKRUNUX0lOUFVUU19XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgcHVibGljIG9iamVjdElucHV0c0NvbnRyb2xsZXI6IE5ndE9iamVjdDNkSW5wdXRzQ29udHJvbGxlcixcbiAgICBwcml2YXRlIGdpem1vSGVscGVyU3RvcmU6IE5ndFNvYmFHaXptb0hlbHBlclN0b3JlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gIH1cbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmd0LXNvYmEtZ2l6bW8tYXhpc1tjb2xvcl1bcm90YXRpb25dJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmd0LWdyb3VwIChyZWFkeSk9XCJvYmplY3QgPSAkZXZlbnRcIiBbcm90YXRpb25dPVwicm90YXRpb25cIj5cbiAgICAgIDxuZ3Qtc29iYS1ib3ggW2FyZ3NdPVwic2NhbGVcIiBbcG9zaXRpb25dPVwiWzAuNCwgMCwgMF1cIj5cbiAgICAgICAgPG5ndC1tZXNoLWJhc2ljLW1hdGVyaWFsXG4gICAgICAgICAgW3BhcmFtZXRlcnNdPVwieyBjb2xvciwgdG9uZU1hcHBlZDogZmFsc2UgfVwiXG4gICAgICAgID48L25ndC1tZXNoLWJhc2ljLW1hdGVyaWFsPlxuICAgICAgPC9uZ3Qtc29iYS1ib3g+XG4gICAgPC9uZ3QtZ3JvdXA+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5ndFNvYmFFeHRlbmRlciwgdXNlRXhpc3Rpbmc6IE5ndFNvYmFHaXptb0F4aXMgfV0sXG59KVxuZXhwb3J0IGNsYXNzIE5ndFNvYmFHaXptb0F4aXMgZXh0ZW5kcyBOZ3RTb2JhRXh0ZW5kZXI8VEhSRUUuR3JvdXA+IHtcbiAgQElucHV0KCkgY29sb3IhOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHJvdGF0aW9uITogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG4gIEBJbnB1dCgpIHNldCBzY2FsZSh2OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLiNzY2FsZSA9IHYgfHwgdGhpcy4jc2NhbGU7XG4gIH1cblxuICBnZXQgc2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3NjYWxlO1xuICB9XG5cbiAgI3NjYWxlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMC44LCAwLjA1LCAwLjA1XTtcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmd0LXNvYmEtZ2l6bW8tYXhpcy1oZWFkJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidm0kIHwgYXN5bmMgYXMgdm1cIj5cbiAgICAgIDxuZ3Qtc3ByaXRlLW1hdGVyaWFsXG4gICAgICAgICNzcHJpdGVNYXRlcmlhbD1cIm5ndFNwcml0ZU1hdGVyaWFsXCJcbiAgICAgICAgW3BhcmFtZXRlcnNdPVwie1xuICAgICAgICAgIG1hcDogdm0udGV4dHVyZSxcbiAgICAgICAgICBvcGFjaXR5OiB2bS5vcGFjaXR5LFxuICAgICAgICAgIHRvbmVNYXBwZWQ6IGZhbHNlLFxuICAgICAgICAgIGFscGhhVGVzdDogMC4zXG4gICAgICAgIH1cIlxuICAgICAgPjwvbmd0LXNwcml0ZS1tYXRlcmlhbD5cbiAgICAgIDxuZ3Qtc3ByaXRlXG4gICAgICAgIChyZWFkeSk9XCJvYmplY3QgPSAkZXZlbnRcIlxuICAgICAgICAocG9pbnRlcm92ZXIpPVwib25BeGlzSGVhZFBvaW50ZXJPdmVyKCRldmVudClcIlxuICAgICAgICAocG9pbnRlcm91dCk9XCJvbkF4aXNIZWFkUG9pbnRlck91dCgkZXZlbnQpXCJcbiAgICAgICAgKHBvaW50ZXJkb3duKT1cIm9uQXhpc0hlYWRQb2ludGVyRG93bigkZXZlbnQpXCJcbiAgICAgICAgW3NjYWxlXT1cInZtLnNjYWxlXCJcbiAgICAgICAgW21hdGVyaWFsXT1cInNwcml0ZU1hdGVyaWFsLm1hdGVyaWFsXCJcbiAgICAgICAgW29iamVjdDNkSW5wdXRzQ29udHJvbGxlcl09XCJvYmplY3RJbnB1dHNDb250cm9sbGVyXCJcbiAgICAgID48L25ndC1zcHJpdGU+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICBOR1RfT0JKRUNUX0lOUFVUU19DT05UUk9MTEVSX1BST1ZJREVSLFxuICAgIEVuaGFuY2VkUnhTdGF0ZSxcbiAgICB7IHByb3ZpZGU6IE5ndFNvYmFFeHRlbmRlciwgdXNlRXhpc3Rpbmc6IE5ndFNvYmFHaXptb0F4aXNIZWFkIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE5ndFNvYmFHaXptb0F4aXNIZWFkIGV4dGVuZHMgTmd0U29iYUV4dGVuZGVyPFRIUkVFLlNwcml0ZT4ge1xuICBASW5wdXQoKSBzZXQgYXJjU3R5bGUoYXJjU3R5bGU6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuc2V0KHsgYXJjU3R5bGUgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbGFiZWwobGFiZWw6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuc2V0KHsgbGFiZWwgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbGFiZWxDb2xvcihsYWJlbENvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGxhYmVsQ29sb3IgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgYXhpc0hlYWRTY2FsZShheGlzSGVhZFNjYWxlOiBudW1iZXIpIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGF4aXNIZWFkU2NhbGUgfSk7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YXRlLnNldCh7IGRpc2FibGVkOiBkaXNhYmxlZCB8fCBmYWxzZSB9KTtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBmb250KGZvbnQ6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuc2V0KHsgZm9udCB9KTtcbiAgfVxuXG4gIHJlYWRvbmx5ICNjaGFuZ2VzJCA9IHRoaXMuc3RhdGUuc2VsZWN0KFxuICAgIHNlbGVjdFNsaWNlKFsnYXJjU3R5bGUnLCAnbGFiZWwnLCAnbGFiZWxDb2xvcicsICdmb250J10pXG4gICk7XG5cbiAgcmVhZG9ubHkgdm0kID0gY29tYmluZUxhdGVzdChbXG4gICAgdGhpcy5zdGF0ZS5zZWxlY3QoXG4gICAgICBzZWxlY3RTbGljZShbJ2FjdGl2ZScsICdsYWJlbCcsICdheGlzSGVhZFNjYWxlJywgJ3RleHR1cmUnXSlcbiAgICApLFxuICAgIHRoaXMuc3RvcmUuc2VsZWN0KCdyZW5kZXJlcicpLFxuICBdKS5waXBlKFxuICAgIG1hcCgoW3sgdGV4dHVyZSwgbGFiZWwsIGFjdGl2ZSwgYXhpc0hlYWRTY2FsZSB9LCByZW5kZXJlcl0pID0+IHtcbiAgICAgIHRleHR1cmUuYW5pc290cm9weSA9IHJlbmRlcmVyLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCkgfHwgMTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHR1cmUsXG4gICAgICAgIHNjYWxlOiAobGFiZWwgPyAxIDogMC43NSkgKiAoYWN0aXZlID8gMS4yIDogMSkgKiBheGlzSGVhZFNjYWxlLFxuICAgICAgICBvcGFjaXR5OiBsYWJlbCA/IDEgOiAwLjc1LFxuICAgICAgfTtcbiAgICB9KVxuICApO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoTkdUX09CSkVDVF9JTlBVVFNfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIHB1YmxpYyBvYmplY3RJbnB1dHNDb250cm9sbGVyOiBOZ3RPYmplY3QzZElucHV0c0NvbnRyb2xsZXIsXG4gICAgQEluamVjdChET0NVTUVOVCkgZG9jdW1lbnQ6IERvY3VtZW50LFxuICAgIHByaXZhdGUgZ2l6bW9WaWV3cG9ydDogTmd0U29iYUdpem1vVmlld3BvcnQsXG4gICAgcHJpdmF0ZSBnaXptb0hlbHBlclN0b3JlOiBOZ3RTb2JhR2l6bW9IZWxwZXJTdG9yZSxcbiAgICBwcml2YXRlIHN0b3JlOiBOZ3RTdG9yZSxcbiAgICBwcml2YXRlIHN0YXRlOiBFbmhhbmNlZFJ4U3RhdGU8e1xuICAgICAgYXJjU3R5bGU6IHN0cmluZztcbiAgICAgIGxhYmVsQ29sb3I6IHN0cmluZztcbiAgICAgIGF4aXNIZWFkU2NhbGU6IG51bWJlcjtcbiAgICAgIGRpc2FibGVkOiBib29sZWFuO1xuICAgICAgZm9udDogc3RyaW5nO1xuICAgICAgdGV4dHVyZTogVEhSRUUuQ2FudmFzVGV4dHVyZTtcbiAgICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgfT5cbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlLnNldCh7XG4gICAgICBsYWJlbDogJycsXG4gICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zdGF0ZS5jb25uZWN0KFxuICAgICAgJ3RleHR1cmUnLFxuICAgICAgdGhpcy4jY2hhbmdlcyQsXG4gICAgICAoXywgeyBsYWJlbCwgbGFiZWxDb2xvciwgYXJjU3R5bGUsIGZvbnQgfSkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gNjQ7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSA2NDtcblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmFyYygzMiwgMzIsIDE2LCAwLCAyICogTWF0aC5QSSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gYXJjU3R5bGU7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuXG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGxhYmVsQ29sb3I7XG4gICAgICAgICAgY29udGV4dC5maWxsVGV4dChsYWJlbCwgMzIsIDQxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgVEhSRUUuQ2FudmFzVGV4dHVyZShjYW52YXMpO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBvbkF4aXNIZWFkUG9pbnRlck92ZXIoJGV2ZW50OiBOZ3RFdmVudDxQb2ludGVyRXZlbnQ+KSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmdldCgnZGlzYWJsZWQnKSkge1xuICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zdGF0ZS5zZXQoeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgb25BeGlzSGVhZFBvaW50ZXJPdXQoJGV2ZW50OiBOZ3RFdmVudDxQb2ludGVyRXZlbnQ+KSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmdldCgnZGlzYWJsZWQnKSkge1xuICAgICAgaWYgKHRoaXMuZ2l6bW9WaWV3cG9ydC5jbGljay5vYnNlcnZlZCkge1xuICAgICAgICB0aGlzLmdpem1vVmlld3BvcnQuY2xpY2suZW1pdCgkZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnN0YXRlLnNldCh7IGFjdGl2ZTogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25BeGlzSGVhZFBvaW50ZXJEb3duKCRldmVudDogTmd0RXZlbnQ8UG9pbnRlckV2ZW50Pikge1xuICAgIGlmICghdGhpcy5zdGF0ZS5nZXQoJ2Rpc2FibGVkJykpIHtcbiAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuZ2l6bW9IZWxwZXJTdG9yZS50d2VlbkNhbWVyYSgkZXZlbnQub2JqZWN0LnBvc2l0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbTmd0U29iYUdpem1vVmlld3BvcnQsIE5ndFNvYmFHaXptb0F4aXMsIE5ndFNvYmFHaXptb0F4aXNIZWFkXSxcbiAgZXhwb3J0czogW05ndFNvYmFHaXptb1ZpZXdwb3J0XSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBOZ3RHcm91cE1vZHVsZSxcbiAgICBOZ3RTb2JhQm94TW9kdWxlLFxuICAgIE5ndE1lc2hCYXNpY01hdGVyaWFsTW9kdWxlLFxuICAgIE5ndFNwcml0ZU1vZHVsZSxcbiAgICBOZ3RTcHJpdGVNYXRlcmlhbE1vZHVsZSxcbiAgICBOZ3RNYXRoUGlwZU1vZHVsZSxcbiAgICBOZ3RBbWJpZW50TGlnaHRNb2R1bGUsXG4gICAgTmd0UG9pbnRMaWdodE1vZHVsZSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgTmd0U29iYUdpem1vVmlld3BvcnRNb2R1bGUge31cbiJdfQ==