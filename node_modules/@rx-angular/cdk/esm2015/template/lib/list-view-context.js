import { BehaviorSubject, ReplaySubject } from 'rxjs';
import { distinctUntilChanged, map, pluck } from 'rxjs/operators';
const computeFirst = ({ count, index }) => index === 0;
const ɵ0 = computeFirst;
const computeLast = ({ count, index }) => index === count - 1;
const ɵ1 = computeLast;
const computeEven = ({ count, index }) => index % 2 === 0;
const ɵ2 = computeEven;
export class RxDefaultListViewContext {
    constructor(item, customProps) {
        this.item = item;
        this._item = new ReplaySubject(1);
        this.item$ = this._item.asObservable();
        this._context$ = new BehaviorSubject({
            index: -1,
            count: -1,
        });
        this.select = (props) => {
            return this.item$.pipe(pluck(...props));
        };
        // tslint:disable-next-line:no-unused-expression
        this.$implicit = item;
        if (customProps) {
            this.updateContext(customProps);
        }
    }
    set $implicit($implicit) {
        this._$implicit = $implicit;
        this._item.next($implicit);
    }
    get $implicit() {
        return this._$implicit;
    }
    get $complete() {
        return this._$complete;
    }
    get $error() {
        return this._$error;
    }
    get $suspense() {
        return this._$suspense;
    }
    get index() {
        return this._context$.getValue().index;
    }
    get count() {
        return this._context$.getValue().count;
    }
    get first() {
        return computeFirst(this._context$.getValue());
    }
    get last() {
        return computeLast(this._context$.getValue());
    }
    get even() {
        return computeEven(this._context$.getValue());
    }
    get odd() {
        return !this.even;
    }
    get index$() {
        return this._context$.pipe(pluck('index'), distinctUntilChanged());
    }
    get count$() {
        return this._context$.pipe(pluck('count'), distinctUntilChanged());
    }
    get first$() {
        return this._context$.pipe(map(computeFirst), distinctUntilChanged());
    }
    get last$() {
        return this._context$.pipe(map(computeLast), distinctUntilChanged());
    }
    get even$() {
        return this._context$.pipe(map(computeEven), distinctUntilChanged());
    }
    get odd$() {
        return this.even$.pipe(map((even) => !even));
    }
    updateContext(newProps) {
        this._context$.next(Object.assign(Object.assign({}, this._context$.getValue()), newProps));
    }
}
export { ɵ0, ɵ1, ɵ2 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC12aWV3LWNvbnRleHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2Nkay90ZW1wbGF0ZS9zcmMvbGliL2xpc3Qtdmlldy1jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQWMsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFjbEUsTUFBTSxZQUFZLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQzs7QUFDdkQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLEtBQUssR0FBRyxDQUFDLENBQUM7O0FBQzlELE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUUxRCxNQUFNLE9BQU8sd0JBQXdCO0lBcUZuQyxZQUFvQixJQUFPLEVBQUUsV0FBOEM7UUFBdkQsU0FBSSxHQUFKLElBQUksQ0FBRztRQWhGbEIsVUFBSyxHQUFHLElBQUksYUFBYSxDQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFVBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO1FBS2pCLGNBQVMsR0FBRyxJQUFJLGVBQWUsQ0FBNEI7WUFDMUUsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUNULEtBQUssRUFBRSxDQUFDLENBQUM7U0FDVixDQUFDLENBQUM7UUFzRkgsV0FBTSxHQUFHLENBQUMsS0FBVSxFQUFtQixFQUFFO1lBQ3ZDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJ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UUFBUSxFQUNYLENBQUM7SUFDTCxDQUFDO0NBS0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ0l0ZXJhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSwgUmVwbGF5U3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgbWFwLCBwbHVjayB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUnhMaXN0Vmlld0NvbXB1dGVkQ29udGV4dCB7XHJcbiAgaW5kZXg6IG51bWJlcjtcclxuICBjb3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJ4TGlzdFZpZXdDb250ZXh0PFQsIFUgPSBSeExpc3RWaWV3Q29tcHV0ZWRDb250ZXh0PlxyXG4gIGV4dGVuZHMgUnhMaXN0Vmlld0NvbXB1dGVkQ29udGV4dCB7XHJcbiAgJGltcGxpY2l0OiBUO1xyXG4gIGl0ZW0kOiBPYnNlcnZhYmxlPFQ+O1xyXG4gIHVwZGF0ZUNvbnRleHQobmV3UHJvcHM6IFBhcnRpYWw8VT4pOiB2b2lkO1xyXG59XHJcblxyXG5jb25zdCBjb21wdXRlRmlyc3QgPSAoeyBjb3VudCwgaW5kZXggfSkgPT4gaW5kZXggPT09IDA7XHJcbmNvbnN0IGNvbXB1dGVMYXN0ID0gKHsgY291bnQsIGluZGV4IH0pID0+IGluZGV4ID09PSBjb3VudCAtIDE7XHJcbmNvbnN0IGNvbXB1dGVFdmVuID0gKHsgY291bnQsIGluZGV4IH0pID0+IGluZGV4ICUgMiA9PT0gMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBSeERlZmF1bHRMaXN0Vmlld0NvbnRleHQ8XHJcbiAgVCxcclxuICBVIGV4dGVuZHMgTmdJdGVyYWJsZTxUPiA9IE5nSXRlcmFibGU8VD4sXHJcbiAgSyA9IGtleW9mIFRcclxuPiBpbXBsZW1lbnRzIFJ4TGlzdFZpZXdDb250ZXh0PFQ+IHtcclxuICByZWFkb25seSBfaXRlbSA9IG5ldyBSZXBsYXlTdWJqZWN0PFQ+KDEpO1xyXG4gIGl0ZW0kID0gdGhpcy5faXRlbS5hc09ic2VydmFibGUoKTtcclxuICBwcml2YXRlIF8kaW1wbGljaXQ6IFQ7XHJcbiAgcHJpdmF0ZSBfJGNvbXBsZXRlOiBib29sZWFuO1xyXG4gIHByaXZhdGUgXyRlcnJvcjogZmFsc2UgfCBFcnJvcjtcclxuICBwcml2YXRlIF8kc3VzcGVuc2U6IGFueTtcclxuICBwcml2YXRlIHJlYWRvbmx5IF9jb250ZXh0JCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8UnhMaXN0Vmlld0NvbXB1dGVkQ29udGV4dD4oe1xyXG4gICAgaW5kZXg6IC0xLFxyXG4gICAgY291bnQ6IC0xLFxyXG4gIH0pO1xyXG5cclxuICBzZXQgJGltcGxpY2l0KCRpbXBsaWNpdDogVCkge1xyXG4gICAgdGhpcy5fJGltcGxpY2l0ID0gJGltcGxpY2l0O1xyXG4gICAgdGhpcy5faXRlbS5uZXh0KCRpbXBsaWNpdCk7XHJcbiAgfVxyXG5cclxuICBnZXQgJGltcGxpY2l0KCk6IFQge1xyXG4gICAgcmV0dXJuIHRoaXMuXyRpbXBsaWNpdDtcclxuICB9XHJcblxyXG4gIGdldCAkY29tcGxldGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGNvbXBsZXRlO1xyXG4gIH1cclxuXHJcbiAgZ2V0ICRlcnJvcigpOiBmYWxzZSB8IEVycm9yIHtcclxuICAgIHJldHVybiB0aGlzLl8kZXJyb3I7XHJcbiAgfVxyXG5cclxuICBnZXQgJHN1c3BlbnNlKCk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJHN1c3BlbnNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGluZGV4KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dCQuZ2V0VmFsdWUoKS5pbmRleDtcclxuICB9XHJcblxyXG4gIGdldCBjb3VudCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQkLmdldFZhbHVlKCkuY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXQgZmlyc3QoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gY29tcHV0ZUZpcnN0KHRoaXMuX2NvbnRleHQkLmdldFZhbHVlKCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxhc3QoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gY29tcHV0ZUxhc3QodGhpcy5fY29udGV4dCQuZ2V0VmFsdWUoKSk7XHJcbiAgfVxyXG5cclxuICBnZXQgZXZlbigpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBjb21wdXRlRXZlbih0aGlzLl9jb250ZXh0JC5nZXRWYWx1ZSgpKTtcclxuICB9XHJcblxyXG4gIGdldCBvZGQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMuZXZlbjtcclxuICB9XHJcblxyXG4gIGdldCBpbmRleCQoKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcclxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0JC5waXBlKHBsdWNrKCdpbmRleCcpLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcclxuICB9XHJcblxyXG4gIGdldCBjb3VudCQoKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcclxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0JC5waXBlKHBsdWNrKCdjb3VudCcpLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcclxuICB9XHJcblxyXG4gIGdldCBmaXJzdCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dCQucGlwZShtYXAoY29tcHV0ZUZpcnN0KSwgZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XHJcbiAgfVxyXG5cclxuICBnZXQgbGFzdCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dCQucGlwZShtYXAoY29tcHV0ZUxhc3QpLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcclxuICB9XHJcblxyXG4gIGdldCBldmVuJCgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0JC5waXBlKG1hcChjb21wdXRlRXZlbiksIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG9kZCQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGhpcy5ldmVuJC5waXBlKG1hcCgoZXZlbikgPT4gIWV2ZW4pKTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaXRlbTogVCwgY3VzdG9tUHJvcHM/OiB7IGNvdW50OiBudW1iZXI7IGluZGV4OiBudW1iZXIgfSkge1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVudXNlZC1leHByZXNzaW9uXHJcbiAgICB0aGlzLiRpbXBsaWNpdCA9IGl0ZW07XHJcbiAgICBpZiAoY3VzdG9tUHJvcHMpIHtcclxuICAgICAgdGhpcy51cGRhdGVDb250ZXh0KGN1c3RvbVByb3BzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUNvbnRleHQobmV3UHJvcHM6IFBhcnRpYWw8UnhMaXN0Vmlld0NvbXB1dGVkQ29udGV4dD4pOiB2b2lkIHtcclxuICAgIHRoaXMuX2NvbnRleHQkLm5leHQoe1xyXG4gICAgICAuLi50aGlzLl9jb250ZXh0JC5nZXRWYWx1ZSgpLFxyXG4gICAgICAuLi5uZXdQcm9wcyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0ID0gKHByb3BzOiBLW10pOiBPYnNlcnZhYmxlPGFueT4gPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbSQucGlwZShwbHVjayguLi4ocHJvcHMgYXMgYW55KSkpO1xyXG4gIH07XHJcbn1cclxuIl19