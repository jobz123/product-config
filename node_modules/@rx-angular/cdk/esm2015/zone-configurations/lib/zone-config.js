import { ɵglobal } from '@angular/core';
import { zoneGlobalDisableConfigurationsKeys, zoneGlobalEventsConfigurationsKeys, zoneGlobalSettingsConfigurationsKeys, zoneRuntimeConfigurationsKeys, zoneTestDisableConfigurationsKeys, zoneTestSettingsConfigurationsKeys, } from './model/configurations.types';
import { convenienceMethods } from './convenience-methods';
const zoneDisable = '__Zone_disable_';
const zoneSymbol = '__zone_symbol__';
/**
 * https://angular.io/guide/zone#setting-up-zonejs
 **/
function assertZoneConfig() {
    if (window.Zone !== undefined) {
        // @TODO link to docs
        console.error('zone-flags file needs to get imported before zone.js');
    }
}
const addDisableFlag = (prop) => ({
    [prop]: () => {
        assertZoneConfig();
        return (window[zoneDisable + prop] = true);
    },
});
const ɵ0 = addDisableFlag;
const addSymbolFlag = (prop) => ({
    [prop]: () => {
        assertZoneConfig();
        return (window[zoneSymbol + prop] = true);
    },
});
const ɵ1 = addSymbolFlag;
const addArraySymbolFlag = (prop) => ({
    [prop]: (eventNames) => {
        assertZoneConfig();
        const w = window;
        return (w[zoneSymbol + prop] = [
            ...(Array.isArray(w[zoneSymbol + prop]) ? w[zoneSymbol + prop] : []),
            ...eventNames,
        ]);
    },
});
const ɵ2 = addArraySymbolFlag;
const reduceToObject = (methodsArray) => {
    return methodsArray.reduce((map, item) => (Object.assign(Object.assign({}, map), item)), {});
};
const ɵ3 = reduceToObject;
/**
 * factory function to create a `RxZoneConfig` object.
 *
 * @Example
 * import { globalEvents,xhrEvent, zoneConfig} from '@rx-angular/cdk/zone-flags';
 *
 * const zoneConfig = createZoneFlagsConfigurator();
 *
 * zoneConfig.global.disable.requestAnimationFrame();
 * zoneConfig.global.disable.timers();
 * zoneConfig.events.disable.UNPATCHED_EVENTS([...globalEvents, ...xhrEvent]);
 *
 */
function createZoneFlagsConfigurator() {
    const cfg = ɵglobal;
    const configProps = [
        ...[
            ...zoneGlobalDisableConfigurationsKeys,
            ...zoneTestDisableConfigurationsKeys,
        ].map((prop) => zoneDisable + prop),
        ...[
            ...zoneGlobalSettingsConfigurationsKeys,
            ...zoneTestSettingsConfigurationsKeys,
            ...zoneGlobalEventsConfigurationsKeys,
            ...zoneRuntimeConfigurationsKeys,
        ].map((prop) => zoneSymbol + prop),
    ];
    // append as global method for easy debugging
    cfg.__rxa_zone_config__log = () => {
        configProps.forEach((flag) => {
            // tslint:disable-next-line:no-unused-expression
            cfg[flag] && console.log(flag, cfg[flag]);
        });
    };
    const zoneConfigObj = {
        global: {
            disable: reduceToObject([
                ...zoneGlobalDisableConfigurationsKeys.map(addDisableFlag),
                ...zoneGlobalSettingsConfigurationsKeys.map(addSymbolFlag),
            ]),
        },
        test: {
            disable: reduceToObject([
                ...zoneTestDisableConfigurationsKeys.map(addDisableFlag),
                ...zoneTestSettingsConfigurationsKeys.map(addSymbolFlag),
            ]),
        },
        events: {
            disable: reduceToObject(zoneGlobalEventsConfigurationsKeys.map(addArraySymbolFlag)),
        },
        runtime: {
            disable: reduceToObject(zoneRuntimeConfigurationsKeys.map(addSymbolFlag)),
        },
    };
    return Object.assign(Object.assign({}, zoneConfigObj), convenienceMethods(zoneConfigObj));
}
/**
 * An object for typed zone-flags configuration.
 *
 * @Example
 *
 * create file `zone-flags.ts` parallel to your `polyfills.ts` and insert following content:
 * ```typescript
 * import { globalEvents, xhrEvent, zoneConfig} from '@rx-angular/cdk/zone-flags';
 *
 * zoneConfig.global.disable.requestAnimationFrame();
 * zoneConfig.global.disable.timers();
 * zoneConfig.events.disable.UNPATCHED_EVENTS([...globalEvents, ...xhrEvent]);
 * ```
 * In `polyfills.ts` above the zone import, import `zone-flags.ts`
 *
 * ```typescript
 * import './zone-flags';
 * // Zone JS is required by default for Angular itself.
 * import 'zone.js';
 * ```
 *
 */
export const zoneConfig = createZoneFlagsConfigurator();
export { ɵ0, ɵ1, ɵ2, ɵ3 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS1jb25maWcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2Nkay96b25lLWNvbmZpZ3VyYXRpb25zL3NyYy9saWIvem9uZS1jb25maWcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4QyxPQUFPLEVBRUwsbUNBQW1DLEVBQ25DLGtDQUFrQyxFQUNsQyxvQ0FBb0MsRUFDcEMsNkJBQTZCLEVBQzdCLGlDQUFpQyxFQUNqQyxrQ0FBa0MsR0FDbkMsTUFBTSw4QkFBOEIsQ0FBQztBQVV0QyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUzRCxNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQztBQUN0QyxNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQztBQUVyQzs7SUFFSTtBQUNKLFNBQVMsZ0JBQWdCO0lBQ3ZCLElBQUssTUFBYyxDQUFDLElBQUksS0FBSyxTQUFTLEVBQUU7UUFDdEMscUJBQXFCO1FBQ3JCLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0RBQXNELENBQUMsQ0FBQztLQUN2RTtBQUNILENBQUM7QUFFRCxNQUFNLGNBQWMsR0FBRyxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN4QyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRTtRQUNYLGdCQUFnQixFQUFFLENBQUM7UUFDbkIsT0FBTyxDQUFFLE1BQWMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDdEQsQ0FBQztDQUNGLENBQUMsQ0FBQzs7QUFFSCxNQUFNLGFBQWEsR0FBRyxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN2QyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRTtRQUNYLGdCQUFnQixFQUFFLENBQUM7UUFDbkIsT0FBTyxDQUFFLE1BQWMsQ0FBQyxV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Ozs7Ozs7Ozs7Ozs7O0dBcUJHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLDJCQUEyQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyDJtWdsb2JhbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1xyXG4gIFJ4Wm9uZUZsYWdzSGVscGVyRnVuY3Rpb25zLFxyXG4gIHpvbmVHbG9iYWxEaXNhYmxlQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gIHpvbmVHbG9iYWxFdmVudHNDb25maWd1cmF0aW9uc0tleXMsXHJcbiAgem9uZUdsb2JhbFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gIHpvbmVSdW50aW1lQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gIHpvbmVUZXN0RGlzYWJsZUNvbmZpZ3VyYXRpb25zS2V5cyxcclxuICB6b25lVGVzdFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLFxyXG59IGZyb20gJy4vbW9kZWwvY29uZmlndXJhdGlvbnMudHlwZXMnO1xyXG5pbXBvcnQgeyBSeFpvbmVHbG9iYWxDb25maWd1cmF0aW9ucyB9IGZyb20gJy4vbW9kZWwvem9uZS5jb25maWd1cmF0aW9ucy5hcGknO1xyXG5pbXBvcnQge1xyXG4gIFJ4Wm9uZUNvbmZpZ0NvbmZpZ3VyYXRpb24sXHJcbiAgUnhab25lQ29uZmlnLFxyXG4gIFJ4R2xvYmFsRGlzYWJsZUNvbmZpZ3VyYXRpb25NZXRob2RzLFxyXG4gIFJ4VGVzdERpc2FibGVDb25maWd1cmF0aW9uTWV0aG9kcyxcclxuICBSeFpvbmVHbG9iYWxFdmVudHNDb25maWd1cmF0aW9uc01ldGhvZHMsXHJcbiAgUnhSdW50aW1lQ29uZmlndXJhdGlvbk1ldGhvZHMsXHJcbn0gZnJvbSAnLi9tb2RlbC96b25lLWNvbmZpZy50eXBlcyc7XHJcbmltcG9ydCB7IGNvbnZlbmllbmNlTWV0aG9kcyB9IGZyb20gJy4vY29udmVuaWVuY2UtbWV0aG9kcyc7XHJcblxyXG5jb25zdCB6b25lRGlzYWJsZSA9ICdfX1pvbmVfZGlzYWJsZV8nO1xyXG5jb25zdCB6b25lU3ltYm9sID0gJ19fem9uZV9zeW1ib2xfXyc7XHJcblxyXG4vKipcclxuICogaHR0cHM6Ly9hbmd1bGFyLmlvL2d1aWRlL3pvbmUjc2V0dGluZy11cC16b25lanNcclxuICoqL1xyXG5mdW5jdGlvbiBhc3NlcnRab25lQ29uZmlnKCkge1xyXG4gIGlmICgod2luZG93IGFzIGFueSkuWm9uZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAvLyBAVE9ETyBsaW5rIHRvIGRvY3NcclxuICAgIGNvbnNvbGUuZXJyb3IoJ3pvbmUtZmxhZ3MgZmlsZSBuZWVkcyB0byBnZXQgaW1wb3J0ZWQgYmVmb3JlIHpvbmUuanMnKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGFkZERpc2FibGVGbGFnID0gKHByb3A6IHN0cmluZykgPT4gKHtcclxuICBbcHJvcF06ICgpID0+IHtcclxuICAgIGFzc2VydFpvbmVDb25maWcoKTtcclxuICAgIHJldHVybiAoKHdpbmRvdyBhcyBhbnkpW3pvbmVEaXNhYmxlICsgcHJvcF0gPSB0cnVlKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGFkZFN5bWJvbEZsYWcgPSAocHJvcDogc3RyaW5nKSA9PiAoe1xyXG4gIFtwcm9wXTogKCkgPT4ge1xyXG4gICAgYXNzZXJ0Wm9uZUNvbmZpZygpO1xyXG4gICAgcmV0dXJuICgod2luZG93IGFzIGFueSlbem9uZVN5bWJvbCArIHByb3BdID0gdHJ1ZSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBhZGRBcnJheVN5bWJvbEZsYWcgPSAocHJvcDogc3RyaW5nKSA9PiAoe1xyXG4gIFtwcm9wXTogKGV2ZW50TmFtZXM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICBhc3NlcnRab25lQ29uZmlnKCk7XHJcbiAgICBjb25zdCB3OiBhbnkgPSB3aW5kb3cgYXMgYW55O1xyXG4gICAgcmV0dXJuICh3W3pvbmVTeW1ib2wgKyBwcm9wXSA9IFtcclxuICAgICAgLi4uKEFycmF5LmlzQXJyYXkod1t6b25lU3ltYm9sICsgcHJvcF0pID8gd1t6b25lU3ltYm9sICsgcHJvcF0gOiBbXSksXHJcbiAgICAgIC4uLmV2ZW50TmFtZXMsXHJcbiAgICBdKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHJlZHVjZVRvT2JqZWN0ID0gPFQ+KG1ldGhvZHNBcnJheTogYW55W10pOiBUID0+IHtcclxuICByZXR1cm4gbWV0aG9kc0FycmF5LnJlZHVjZSgobWFwLCBpdGVtKSA9PiAoeyAuLi5tYXAsIC4uLml0ZW0gfSksIHt9IGFzIFQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIGZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYFJ4Wm9uZUNvbmZpZ2Agb2JqZWN0LlxyXG4gKlxyXG4gKiBARXhhbXBsZVxyXG4gKiBpbXBvcnQgeyBnbG9iYWxFdmVudHMseGhyRXZlbnQsIHpvbmVDb25maWd9IGZyb20gJ0ByeC1hbmd1bGFyL2Nkay96b25lLWZsYWdzJztcclxuICpcclxuICogY29uc3Qgem9uZUNvbmZpZyA9IGNyZWF0ZVpvbmVGbGFnc0NvbmZpZ3VyYXRvcigpO1xyXG4gKlxyXG4gKiB6b25lQ29uZmlnLmdsb2JhbC5kaXNhYmxlLnJlcXVlc3RBbmltYXRpb25GcmFtZSgpO1xyXG4gKiB6b25lQ29uZmlnLmdsb2JhbC5kaXNhYmxlLnRpbWVycygpO1xyXG4gKiB6b25lQ29uZmlnLmV2ZW50cy5kaXNhYmxlLlVOUEFUQ0hFRF9FVkVOVFMoWy4uLmdsb2JhbEV2ZW50cywgLi4ueGhyRXZlbnRdKTtcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVpvbmVGbGFnc0NvbmZpZ3VyYXRvcigpOiBSeFpvbmVDb25maWcge1xyXG4gIGNvbnN0IGNmZyA9IMm1Z2xvYmFsIGFzIHVua25vd24gYXMgUnhab25lR2xvYmFsQ29uZmlndXJhdGlvbnM7XHJcbiAgY29uc3QgY29uZmlnUHJvcHMgPSBbXHJcbiAgICAuLi5bXHJcbiAgICAgIC4uLnpvbmVHbG9iYWxEaXNhYmxlQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gICAgICAuLi56b25lVGVzdERpc2FibGVDb25maWd1cmF0aW9uc0tleXMsXHJcbiAgICBdLm1hcCgocHJvcCkgPT4gem9uZURpc2FibGUgKyBwcm9wKSxcclxuICAgIC4uLltcclxuICAgICAgLi4uem9uZUdsb2JhbFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gICAgICAuLi56b25lVGVzdFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gICAgICAuLi56b25lR2xvYmFsRXZlbnRzQ29uZmlndXJhdGlvbnNLZXlzLFxyXG4gICAgICAuLi56b25lUnVudGltZUNvbmZpZ3VyYXRpb25zS2V5cyxcclxuICAgIF0ubWFwKChwcm9wKSA9PiB6b25lU3ltYm9sICsgcHJvcCksXHJcbiAgXTtcclxuXHJcbiAgLy8gYXBwZW5kIGFzIGdsb2JhbCBtZXRob2QgZm9yIGVhc3kgZGVidWdnaW5nXHJcbiAgKGNmZyBhcyBSeFpvbmVGbGFnc0hlbHBlckZ1bmN0aW9ucykuX19yeGFfem9uZV9jb25maWdfX2xvZyA9ICgpOiB2b2lkID0+IHtcclxuICAgIGNvbmZpZ1Byb3BzLmZvckVhY2goKGZsYWcpID0+IHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVudXNlZC1leHByZXNzaW9uXHJcbiAgICAgIGNmZ1tmbGFnXSAmJiBjb25zb2xlLmxvZyhmbGFnLCBjZmdbZmxhZ10pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgem9uZUNvbmZpZ09iajogUnhab25lQ29uZmlnQ29uZmlndXJhdGlvbiA9IHtcclxuICAgIGdsb2JhbDoge1xyXG4gICAgICBkaXNhYmxlOiByZWR1Y2VUb09iamVjdDxSeEdsb2JhbERpc2FibGVDb25maWd1cmF0aW9uTWV0aG9kcz4oW1xyXG4gICAgICAgIC4uLnpvbmVHbG9iYWxEaXNhYmxlQ29uZmlndXJhdGlvbnNLZXlzLm1hcChhZGREaXNhYmxlRmxhZyksXHJcbiAgICAgICAgLi4uem9uZUdsb2JhbFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLm1hcChhZGRTeW1ib2xGbGFnKSxcclxuICAgICAgXSksXHJcbiAgICB9LFxyXG4gICAgdGVzdDoge1xyXG4gICAgICBkaXNhYmxlOiByZWR1Y2VUb09iamVjdDxSeFRlc3REaXNhYmxlQ29uZmlndXJhdGlvbk1ldGhvZHM+KFtcclxuICAgICAgICAuLi56b25lVGVzdERpc2FibGVDb25maWd1cmF0aW9uc0tleXMubWFwKGFkZERpc2FibGVGbGFnKSxcclxuICAgICAgICAuLi56b25lVGVzdFNldHRpbmdzQ29uZmlndXJhdGlvbnNLZXlzLm1hcChhZGRTeW1ib2xGbGFnKSxcclxuICAgICAgXSksXHJcbiAgICB9LFxyXG4gICAgZXZlbnRzOiB7XHJcbiAgICAgIGRpc2FibGU6IHJlZHVjZVRvT2JqZWN0PFJ4Wm9uZUdsb2JhbEV2ZW50c0NvbmZpZ3VyYXRpb25zTWV0aG9kcz4oXHJcbiAgICAgICAgem9uZUdsb2JhbEV2ZW50c0NvbmZpZ3VyYXRpb25zS2V5cy5tYXAoYWRkQXJyYXlTeW1ib2xGbGFnKVxyXG4gICAgICApLFxyXG4gICAgfSxcclxuICAgIHJ1bnRpbWU6IHtcclxuICAgICAgZGlzYWJsZTogcmVkdWNlVG9PYmplY3Q8UnhSdW50aW1lQ29uZmlndXJhdGlvbk1ldGhvZHM+KFxyXG4gICAgICAgIHpvbmVSdW50aW1lQ29uZmlndXJhdGlvbnNLZXlzLm1hcChhZGRTeW1ib2xGbGFnKVxyXG4gICAgICApLFxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLi4uem9uZUNvbmZpZ09iaixcclxuICAgIC4uLmNvbnZlbmllbmNlTWV0aG9kcyh6b25lQ29uZmlnT2JqKSxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQW4gb2JqZWN0IGZvciB0eXBlZCB6b25lLWZsYWdzIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEBFeGFtcGxlXHJcbiAqXHJcbiAqIGNyZWF0ZSBmaWxlIGB6b25lLWZsYWdzLnRzYCBwYXJhbGxlbCB0byB5b3VyIGBwb2x5ZmlsbHMudHNgIGFuZCBpbnNlcnQgZm9sbG93aW5nIGNvbnRlbnQ6XHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogaW1wb3J0IHsgZ2xvYmFsRXZlbnRzLCB4aHJFdmVudCwgem9uZUNvbmZpZ30gZnJvbSAnQHJ4LWFuZ3VsYXIvY2RrL3pvbmUtZmxhZ3MnO1xyXG4gKlxyXG4gKiB6b25lQ29uZmlnLmdsb2JhbC5kaXNhYmxlLnJlcXVlc3RBbmltYXRpb25GcmFtZSgpO1xyXG4gKiB6b25lQ29uZmlnLmdsb2JhbC5kaXNhYmxlLnRpbWVycygpO1xyXG4gKiB6b25lQ29uZmlnLmV2ZW50cy5kaXNhYmxlLlVOUEFUQ0hFRF9FVkVOVFMoWy4uLmdsb2JhbEV2ZW50cywgLi4ueGhyRXZlbnRdKTtcclxuICogYGBgXHJcbiAqIEluIGBwb2x5ZmlsbHMudHNgIGFib3ZlIHRoZSB6b25lIGltcG9ydCwgaW1wb3J0IGB6b25lLWZsYWdzLnRzYFxyXG4gKlxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIGltcG9ydCAnLi96b25lLWZsYWdzJztcclxuICogLy8gWm9uZSBKUyBpcyByZXF1aXJlZCBieSBkZWZhdWx0IGZvciBBbmd1bGFyIGl0c2VsZi5cclxuICogaW1wb3J0ICd6b25lLmpzJztcclxuICogYGBgXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgem9uZUNvbmZpZyA9IGNyZWF0ZVpvbmVGbGFnc0NvbmZpZ3VyYXRvcigpO1xyXG4iXX0=